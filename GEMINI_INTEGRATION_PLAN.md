# ü§ñ –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Google Gemini AI –≤ Finapp

> **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 15.12.2024
> **API –∫–ª—é—á:** `AIzaSyCRqd_tgHp3Gkcdd2ggiKN6CZESGv2USiY`
> **–û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å:** `gemini-3-pro-preview`

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–ú–æ–¥–µ–ª–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–º–æ–¥–µ–ª–∏-–∏-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
3. [–§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞](#—Ñ–∞–∑–∞-1-–±–∞–∑–æ–≤–∞—è-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
4. [–§–∞–∑–∞ 2: AI –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤](#—Ñ–∞–∑–∞-2-ai-–¥–ª—è-—Ñ–∏–Ω–∞–Ω—Å–æ–≤)
5. [–§–∞–∑–∞ 3: AI –¥–ª—è —Ç–µ–Ω–¥–µ—Ä–æ–≤](#—Ñ–∞–∑–∞-3-ai-–¥–ª—è-—Ç–µ–Ω–¥–µ—Ä–æ–≤)
6. [–§–∞–∑–∞ 4: AI –¥–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∏ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–∏](#—Ñ–∞–∑–∞-4-ai-–¥–ª—è-–ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤-–∏-–±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–∏)
7. [–§–∞–∑–∞ 5: AI –¥–ª—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π](#—Ñ–∞–∑–∞-5-ai-–¥–ª—è-–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π)
8. [–§–∞–∑–∞ 6: AI –¥–ª—è –ª–∏—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞](#—Ñ–∞–∑–∞-6-ai-–¥–ª—è-–ª–∏—á–Ω–æ–≥–æ-—Ä–µ–∂–∏–º–∞)
9. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
10. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

---

## –û–±–∑–æ—Ä

### –¶–µ–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
- ‚úÖ –ó–∞–º–µ–Ω–∏—Ç—å OpenAI –Ω–∞ Google Gemini
- ‚úÖ –í–Ω–µ–¥—Ä–∏—Ç—å AI –≤–æ –≤—Å–µ –º–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RAG –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- ‚úÖ –í–Ω–µ–¥—Ä–∏—Ç—å Graph-RAG –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–≤—è–∑–µ–π
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å Google Search –∏ URL Context

### –ú–æ–¥—É–ª–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
| –ú–æ–¥—É–ª—å | –°—Ç–∞—Ç—É—Å | AI —Ñ—É–Ω–∫—Ü–∏–∏ |
|--------|--------|------------|
| –§–∏–Ω–∞–Ω—Å—ã | üü¢ –ê–∫—Ç–∏–≤–µ–Ω | –ß–∞—Ç, –∞–Ω–∞–ª–∏–∑, –ø—Ä–æ–≥–Ω–æ–∑—ã, –∞–≤—Ç–æ–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è |
| –¢–µ–Ω–¥–µ—Ä—ã | üü¢ –ê–∫—Ç–∏–≤–µ–Ω | RAG –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º, Graph-RAG, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ |
| –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ | üü¢ –ê–∫—Ç–∏–≤–µ–Ω | –ê–Ω–∞–ª–∏–∑, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, —Ä–∏—Å–∫–∏ |
| –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è | üü¢ –ê–∫—Ç–∏–≤–µ–Ω | –û—Ç—á—ë—Ç—ã, –∞–Ω–æ–º–∞–ª–∏–∏, compliance |
| –ò–Ω–≤–µ—Å—Ç–æ—Ä—ã | üü¢ –ê–∫—Ç–∏–≤–µ–Ω | –ê–Ω–∞–ª–∏—Ç–∏–∫–∞, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ |
| –õ–æ–≥–∏—Å—Ç–∏–∫–∞ | üü¢ –ê–∫—Ç–∏–≤–µ–Ω | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –ø—Ä–æ–≥–Ω–æ–∑—ã |
| –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ | üü° –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ | –ê–Ω–∞–ª–∏–∑ –ø–æ—Ä—Ç—Ñ–µ–ª—è, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ |
| –õ–∏—á–Ω—ã–π —Ä–µ–∂–∏–º | üü° –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ | –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç |

---

## –ú–æ–¥–µ–ª–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏ Gemini:

| –ú–æ–¥–µ–ª—å | ID | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
|--------|-----|------------|-----------|
| **Gemini 3 Pro** | `gemini-3-pro-preview` | –ß–∞—Ç, –∞–Ω–∞–ª–∏–∑, reasoning | `thinkingLevel: low/high` |
| **Gemini 2.5 Flash** | `gemini-2.5-flash` | –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–¥–∞—á–∏ | - |
| **Embeddings** | `gemini-embedding-001` | –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | `outputDimensionality: 768/1536/3072` |

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Gemini 3 Pro:

```javascript
// 1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ
config: {
  thinkingConfig: { thinkingLevel: "high" }
}

// 2. Google Search (–ø–æ–∏—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ)
config: {
  tools: [{ googleSearch: {} }]
}

// 3. URL Context (–∞–Ω–∞–ª–∏–∑ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü)
config: {
  tools: [{ urlContext: {} }]
}

// 4. Structured Output (JSON —Å—Ö–µ–º–∞)
config: {
  responseMimeType: "application/json",
  responseJsonSchema: schema
}

// 5. Function Calling (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
config: {
  tools: [{ functionDeclarations: [...] }]
}
```

---

## –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

### –ó–∞–¥–∞—á–∏:

- [x] **1.1** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SDK `@google/genai`
- [x] **1.2** –°–æ–∑–¥–∞—Ç—å `lib/ai/gemini-client.ts` ‚Äî –∫–ª–∏–µ–Ω—Ç Gemini
- [x] **1.3** –û–±–Ω–æ–≤–∏—Ç—å `lib/ai/embeddings.ts` ‚Äî Gemini embeddings
- [x] **1.4** –°–æ–∑–¥–∞—Ç—å `lib/ai/gemini-tools.ts` ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä tools (`convert-tools.ts`)
- [x] **1.5** –£–¥–∞–ª–∏—Ç—å OpenAI –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ Gemini)
- [x] **1.6** –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (GEMINI_API_KEY)

### –§–∞–π–ª—ã:

```
lib/ai/
‚îú‚îÄ‚îÄ gemini-client.ts      # NEW: –ö–ª–∏–µ–Ω—Ç Gemini 3 Pro
‚îú‚îÄ‚îÄ gemini-tools.ts       # NEW: –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä tools –¥–ª—è Gemini
‚îú‚îÄ‚îÄ embeddings.ts         # UPDATE: Gemini embeddings
‚îú‚îÄ‚îÄ openai-client.ts      # DELETE: –£–¥–∞–ª–∏—Ç—å
‚îî‚îÄ‚îÄ convert-tools.ts      # UPDATE: Gemini format
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

```bash
# .env.local
GEMINI_API_KEY=AIzaSyCRqd_tgHp3Gkcdd2ggiKN6CZESGv2USiY

# –£–¥–∞–ª–∏—Ç—å:
# OPENAI_API_KEY=...
```

---

## –§–∞–∑–∞ 2: AI –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤

### –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

### –ú–æ–¥—É–ª–∏:
- `/finance` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –º–æ–¥—É–ª—å
- `/transactions` ‚Äî —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `/budgets` ‚Äî –±—é–¥–∂–µ—Ç—ã
- `/plans` ‚Äî —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–ª–∞–Ω—ã
- `/forecasts` ‚Äî –ø—Ä–æ–≥–Ω–æ–∑—ã
- `/analytics` ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- `/ai-chat` ‚Äî AI —á–∞—Ç

### –ó–∞–¥–∞—á–∏:

- [x] **2.1** –û–±–Ω–æ–≤–∏—Ç—å `app/api/ai/chat/route.ts` ‚Äî Gemini —á–∞—Ç —Å tools
- [x] **2.2** –û–±–Ω–æ–≤–∏—Ç—å `app/api/ai/models/route.ts` ‚Äî –º–æ–¥–µ–ª–∏ Gemini
- [x] **2.3** –û–±–Ω–æ–≤–∏—Ç—å RAG pipeline –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (`rag-pipeline.ts`)
- [x] **2.4** –î–æ–±–∞–≤–∏—Ç—å AI –∞–Ω–∞–ª–∏–∑ —Ä–∞—Å—Ö–æ–¥–æ–≤ (`expense-analyzer.ts`)
- [x] **2.5** –î–æ–±–∞–≤–∏—Ç—å AI –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ (`finance-forecasting.ts`)
- [x] **2.6** –ê–≤—Ç–æ–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —á–µ—Ä–µ–∑ Gemini (`suggestCategory`)

### AI —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤:

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | Tool |
|---------|----------|------|
| –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é | –ì–æ–ª–æ—Å–æ–≤–æ–π/—Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥ | `addTransaction` |
| –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å—Ö–æ–¥–æ–≤ | –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –ø–µ—Ä–∏–æ–¥–∞–º | `getExpensesByCategory` |
| –ü—Ä–æ–≥–Ω–æ–∑ –±—é–¥–∂–µ—Ç–∞ | –ù–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ | `forecastBudget` |
| –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π | –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π RAG –ø–æ–∏—Å–∫ | `searchTransactions` |
| –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Å–æ–≤–µ—Ç—ã | –ù–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö | `getFinancialAdvice` |
| –ê–Ω–æ–º–∞–ª–∏–∏ | –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç—Ä–∞—Ç | `detectAnomalies` |

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```javascript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–°–∫–æ–ª—å–∫–æ —è –ø–æ—Ç—Ä–∞—Ç–∏–ª –Ω–∞ –µ–¥—É –≤ –Ω–æ—è–±—Ä–µ?"
// AI –≤—ã–∑—ã–≤–∞–µ—Ç tool: getExpensesByCategory({ month: "november", category: "–ï–¥–∞" })
// AI –æ—Ç–≤–µ—á–∞–µ—Ç —Å –∞–Ω–∞–ª–∏–∑–æ–º –∏ –≥—Ä–∞—Ñ–∏–∫–æ–º
```

---

## –§–∞–∑–∞ 3: AI –¥–ª—è —Ç–µ–Ω–¥–µ—Ä–æ–≤

### –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

### –ú–æ–¥—É–ª–∏:
- `/tenders` ‚Äî —Ç–µ–Ω–¥–µ—Ä—ã

### –ó–∞–¥–∞—á–∏:

- [x] **3.1** –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –ë–î –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (documents, document_chunks, entities, relations)
- [x] **3.2** –°–æ–∑–¥–∞—Ç—å `lib/ai/document-processor.ts` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- [x] **3.3** –°–æ–∑–¥–∞—Ç—å `lib/ai/tender-rag.ts` ‚Äî RAG –¥–ª—è —Ç–µ–Ω–¥–µ—Ä–æ–≤ (–≤ graph-rag.ts)
- [x] **3.4** –°–æ–∑–¥–∞—Ç—å `lib/ai/entity-extractor.ts` ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π
- [x] **3.5** –°–æ–∑–¥–∞—Ç—å `lib/ai/graph-rag.ts` ‚Äî Graph-RAG
- [x] **3.6** API endpoints –¥–ª—è —Ç–µ–Ω–¥–µ—Ä–æ–≤ (`app/api/ai/tenders/route.ts`)

### RAG Pipeline –¥–ª—è —Ç–µ–Ω–¥–µ—Ä–æ–≤:

```
Upload ‚Üí Extract Text ‚Üí Chunking ‚Üí Embedding ‚Üí Store ‚Üí Query
```

### Graph-RAG –¥–ª—è —Ç–µ–Ω–¥–µ—Ä–æ–≤:

**–°—É—â–Ω–æ—Å—Ç–∏:**
- –¢–µ–Ω–¥–µ—Ä—ã
- –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è (—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã, –ì–û–°–¢—ã)
- –ü—Ä–æ–¥—É–∫—Ç—ã
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã

**–°–≤—è–∑–∏:**
- `REQUIRES_CERT` ‚Äî —Ç–µ–Ω–¥–µ—Ä —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- `HAS_CERT` ‚Äî –ø–æ—Å—Ç–∞–≤—â–∏–∫ –∏–º–µ–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- `SUPPLIES` ‚Äî –ø–æ—Å—Ç–∞–≤—â–∏–∫ –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–≤–∞—Ä
- `VIOLATES` ‚Äî –Ω–∞—Ä—É—à–µ–Ω–∏–µ

### API Endpoints:

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| POST | `/api/tenders/:id/documents/upload` | –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç |
| POST | `/api/tenders/:id/ask` | –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –ø–æ —Ç–µ–Ω–¥–µ—Ä—É |
| POST | `/api/tenders/:id/compliance-check` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è |
| GET | `/api/tenders/:id/graph/entities` | –°—É—â–Ω–æ—Å—Ç–∏ —Ç–µ–Ω–¥–µ—Ä–∞ |

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```javascript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ï—Å—Ç—å –ª–∏ —É –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –û–û–û –†–æ–º–∞—à–∫–∞ –Ω—É–∂–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ —Ç–µ–Ω–¥–µ—Ä–∞?"

// AI:
// 1. –ù–∞—Ö–æ–¥–∏—Ç —Å—É—â–Ω–æ—Å—Ç—å "–û–û–û –†–æ–º–∞—à–∫–∞" –≤ –≥—Ä–∞—Ñ–µ
// 2. –ü–æ–ª—É—á–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ç–µ–Ω–¥–µ—Ä–∞
// 3. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
// 4. –û—Ç–≤–µ—á–∞–µ—Ç —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º:
//    ‚úÖ –•–ê–°–°–ü ‚Äî –µ—Å—Ç—å
//    ‚ùå –ì–û–°–¢ –† 54934-2012 ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
//    ‚ö†Ô∏è –†–∏—Å–∫: —à—Ç—Ä–∞—Ñ –≤ 2022 –≥–æ–¥—É
```

---

## –§–∞–∑–∞ 4: AI –¥–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∏ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–∏

### –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

### –ú–æ–¥—É–ª–∏:
- –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ (suppliers)
- –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è (accounting)
- –ü–ª–∞—Ç–µ–∂–∏ (`/payments`)

### –ó–∞–¥–∞—á–∏:

- [x] **4.1** AI –∞–Ω–∞–ª–∏–∑ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ (`supplier-analyzer.ts`)
- [x] **4.2** AI –æ—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤ (`assessSupplierRisk`)
- [x] **4.3** AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–∞–∫—É–ø–∫–∞–º (`recommendSuppliersForPurchase`)
- [x] **4.4** AI –¥–ª—è –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏—Ö –æ—Ç—á—ë—Ç–æ–≤ (`accounting-ai.ts`)
- [x] **4.5** AI –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π –≤ –ø–ª–∞—Ç–µ–∂–∞—Ö (`detectPaymentAnomalies`)
- [x] **4.6** AI compliance –ø—Ä–æ–≤–µ—Ä–∫–∏ (`checkCompliance`)

### AI —Ñ—É–Ω–∫—Ü–∏–∏:

| –ú–æ–¥—É–ª—å | –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|---------|----------|
| –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ | –ê–Ω–∞–ª–∏–∑ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ | –û—Ü–µ–Ω–∫–∞ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏, –æ—Ç–∑—ã–≤–∞–º |
| –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ | –ü–æ–∏—Å–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ | Google Search –ø–æ —Ä—ã–Ω–∫—É |
| –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ü–µ–Ω | –ê–Ω–∞–ª–∏–∑ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π |
| –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á—ë—Ç—ã |
| –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è | –ê—É–¥–∏—Ç | –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏ |
| –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è | –ù–∞–ª–æ–≥–æ–≤—ã–µ —Å–æ–≤–µ—Ç—ã | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞–ª–æ–≥–æ–≤ |

---

## –§–∞–∑–∞ 5: AI –¥–ª—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π

### –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

### –ú–æ–¥—É–ª–∏:
- `/investments` ‚Äî –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
- `/investors` ‚Äî –∏–Ω–≤–µ—Å—Ç–æ—Ä—ã

### –ó–∞–¥–∞—á–∏:

- [x] **5.1** AI –∞–Ω–∞–ª–∏–∑ –ø–æ—Ä—Ç—Ñ–µ–ª—è (`investment-ai.ts` - `analyzePortfolio`)
- [x] **5.2** AI –ø—Ä–æ–≥–Ω–æ–∑—ã –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ (`getInvestmentRecommendations`)
- [x] **5.3** AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ (`calculateOptimalAllocation`)
- [x] **5.4** AI –æ—Ç—á—ë—Ç—ã –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ (`generateInvestorReport`)
- [x] **5.5** AI –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ (–≤ –æ—Ç—á—ë—Ç–∞—Ö)
- [x] **5.6** AI –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä—ã–Ω–∫–∞ (`getMarketInsights`)

### AI —Ñ—É–Ω–∫—Ü–∏–∏:

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã |
|---------|----------|-------------|
| –ê–Ω–∞–ª–∏–∑ –ø–æ—Ä—Ç—Ñ–µ–ª—è | –°—Ç—Ä—É–∫—Ç—É—Ä–∞, —Ä–∏—Å–∫–∏, –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å | Reasoning |
| –ü—Ä–æ–≥–Ω–æ–∑ | –ù–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö | Thinking High |
| –ù–æ–≤–æ—Å—Ç–∏ —Ä—ã–Ω–∫–∞ | –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è | Google Search |
| –û—Ç—á—ë—Ç –∏–Ω–≤–µ—Å—Ç–æ—Ä—É | PDF —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ | Structured Output |

---

## –§–∞–∑–∞ 6: AI –¥–ª—è –ª–∏—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

### –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

### –ú–æ–¥—É–ª–∏:
- `/personal` ‚Äî –ª–∏—á–Ω—ã–π —Ä–µ–∂–∏–º
- `/fitness` ‚Äî —Ñ–∏—Ç–Ω–µ—Å
- `/notes` ‚Äî –∑–∞–º–µ—Ç–∫–∏
- `/prompts` ‚Äî –ø—Ä–æ–º–ø—Ç—ã
- `/bookmarks` ‚Äî –∑–∞–∫–ª–∞–¥–∫–∏

### –ó–∞–¥–∞—á–∏:

- [x] **6.1** –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç (`personal-ai.ts` - `generatePersonalInsights`)
- [x] **6.2** AI –¥–ª—è —Ñ–∏—Ç–Ω–µ—Å–∞ (–∞–Ω–∞–ª–∏–∑ –ø—Ä–∏–≤—ã—á–µ–∫ - `analyzeSpendingHabits`)
- [x] **6.3** AI –¥–ª—è –∑–∞–º–µ—Ç–æ–∫ (—É–º–Ω—ã–π –ø–æ–∏—Å–∫ - `smartSearch`)
- [x] **6.4** AI –¥–ª—è –∑–∞–∫–ª–∞–¥–æ–∫ (—É–º–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è - `generateSmartReminders`)
- [x] **6.5** –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ (—á–µ—Ä–µ–∑ Gemini chat)
- [x] **6.6** –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å (`receipt-ocr.ts` - Gemini Vision)

### AI —Ñ—É–Ω–∫—Ü–∏–∏:

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| –£–º–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ | –ê–≤—Ç–æ—Ç–µ–≥–∏, —Å–≤—è–∑–∏, –ø–æ–∏—Å–∫ |
| –§–∏—Ç–Ω–µ—Å –ø–ª–∞–Ω—ã | –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã |
| –†–µ—Ü–µ–ø—Ç—ã | –ù–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π |
| –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è | –£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| Life coach | –°–æ–≤–µ—Ç—ã –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—è |

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

```sql
-- –î–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è RAG
CREATE TABLE documents (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL,
  module TEXT NOT NULL, -- 'tenders', 'finance', 'personal'
  file_name TEXT NOT NULL,
  file_path TEXT NOT NULL,
  doc_type TEXT,
  status TEXT DEFAULT 'queued',
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ß–∞–Ω–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å embeddings
CREATE TABLE document_chunks (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  document_id UUID REFERENCES documents(id) ON DELETE CASCADE,
  user_id UUID NOT NULL,
  chunk_index INT NOT NULL,
  text_content TEXT NOT NULL,
  embedding vector(768), -- Gemini embeddings
  metadata JSONB,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –°—É—â–Ω–æ—Å—Ç–∏ –¥–ª—è Graph-RAG
CREATE TABLE entities (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL,
  entity_type TEXT NOT NULL,
  name TEXT NOT NULL,
  external_id TEXT,
  data JSONB,
  confidence FLOAT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –°–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏
CREATE TABLE relations (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL,
  from_entity_id UUID REFERENCES entities(id),
  rel_type TEXT NOT NULL,
  to_entity_id UUID REFERENCES entities(id),
  data JSONB,
  confidence FLOAT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ò—Å—Ç–æ—Ä–∏—è AI —á–∞—Ç–æ–≤ (—É–∂–µ –µ—Å—Ç—å, –æ–±–Ω–æ–≤–∏—Ç—å)
-- ai_chats, ai_messages
```

### –ú–∏–≥—Ä–∞—Ü–∏—è embeddings:

```sql
-- –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å —Å 3072 –Ω–∞ 768
ALTER TABLE transactions 
  ALTER COLUMN embedding TYPE vector(768);

-- –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–ª–æ–Ω–∫—É
ALTER TABLE transactions 
  ADD COLUMN embedding_gemini vector(768);
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### API –∫–ª—é—á–∏:

```bash
# –¢–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
GEMINI_API_KEY=AIzaSyCRqd_tgHp3Gkcdd2ggiKN6CZESGv2USiY

# –ù–∏–∫–æ–≥–¥–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ!
```

### RLS –ø–æ–ª–∏—Ç–∏–∫–∏:

```sql
-- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å user_id
ALTER TABLE documents ENABLE ROW LEVEL SECURITY;
CREATE POLICY documents_user ON documents
  FOR ALL USING (user_id = auth.uid());
```

### –ö–≤–æ—Ç—ã:

```sql
CREATE TABLE ai_quotas (
  user_id UUID PRIMARY KEY,
  max_requests_day INT DEFAULT 1000,
  max_tokens_month INT DEFAULT 1000000,
  used_requests_day INT DEFAULT 0,
  used_tokens_month INT DEFAULT 0,
  reset_date DATE
);
```

---

## –ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚úÖ
- [x] 1.1 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SDK (@google/genai)
- [x] 1.2 –°–æ–∑–¥–∞—Ç—å gemini-client.ts
- [x] 1.3 –û–±–Ω–æ–≤–∏—Ç—å embeddings.ts
- [x] 1.4 –°–æ–∑–¥–∞—Ç—å convertToolsToGemini
- [x] 1.5 –û–±–Ω–æ–≤–∏—Ç—å receipt-ocr.ts (Gemini Vision)
- [x] 1.6 –û–±–Ω–æ–≤–∏—Ç—å env (GEMINI_API_KEY)

### –§–∞–∑–∞ 2: AI –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤ ‚úÖ
- [x] 2.1 –û–±–Ω–æ–≤–∏—Ç—å chat route (Gemini API)
- [x] 2.2 –û–±–Ω–æ–≤–∏—Ç—å models route (Gemini models)
- [x] 2.3 RAG pipeline (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç Gemini embeddings)
- [x] 2.4 suggestCategory (Gemini)
- [x] 2.5 AI –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ (finance-forecasting.ts)
- [x] 2.6 AI –∞–Ω–∞–ª–∏–∑ —Ä–∞—Å—Ö–æ–¥–æ–≤ (expense-analyzer.ts)

### –§–∞–∑–∞ 3: AI –¥–ª—è —Ç–µ–Ω–¥–µ—Ä–æ–≤ ‚úÖ
- [x] 3.1 –¢–∞–±–ª–∏—Ü—ã –ë–î (documents, document_chunks, entities, relations, ai_summaries)
- [x] 3.2 Document processor (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞, —á–∞–Ω–∫–∏–Ω–≥, embeddings)
- [x] 3.3 Entity extractor (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ —Å–≤—è–∑–µ–π)
- [x] 3.4 Graph-RAG (–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≥—Ä–∞—Ñ—É –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º)
- [x] 3.5 API endpoints –¥–ª—è —Ç–µ–Ω–¥–µ—Ä–æ–≤ (app/api/ai/tenders/route.ts)
- [x] 3.6 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UI —Ç–µ–Ω–¥–µ—Ä–æ–≤ (useTenderAI hook + TenderAIPanel)

### –§–∞–∑–∞ 4: AI –¥–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤/–±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–∏ ‚úÖ
- [x] 4.1 –ê–Ω–∞–ª–∏–∑ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ (supplier-analyzer.ts)
- [x] 4.2 –û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- [x] 4.3 –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∑–∞–∫—É–ø–æ–∫
- [x] 4.4 –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–µ –æ—Ç—á—ë—Ç—ã (accounting-ai.ts)
- [x] 4.5 –ê–Ω–æ–º–∞–ª–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- [x] 4.6 Compliance –ø—Ä–æ–≤–µ—Ä–∫–∏

### –§–∞–∑–∞ 5: AI –¥–ª—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π ‚úÖ
- [x] 5.1 –ê–Ω–∞–ª–∏–∑ –ø–æ—Ä—Ç—Ñ–µ–ª—è (investment-ai.ts)
- [x] 5.2 –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–º
- [x] 5.3 –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
- [x] 5.4 –û—Ç—á—ë—Ç—ã –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤
- [x] 5.5 –†—ã–Ω–æ—á–Ω—ã–µ –∏–Ω—Å–∞–π—Ç—ã
- [x] 5.6 –¢—Ä–µ–∫–∏–Ω–≥ –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤

### –§–∞–∑–∞ 6: AI –¥–ª—è –ª–∏—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ ‚úÖ
- [x] 6.1 –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Å–∞–π—Ç—ã (personal-ai.ts)
- [x] 6.2 –ê–Ω–∞–ª–∏–∑ —Ü–µ–ª–µ–π
- [x] 6.3 –£–º–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- [x] 6.4 –£–º–Ω—ã–π –ø–æ–∏—Å–∫
- [x] 6.5 –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–∏–Ω–ø–ª–∞–Ω
- [x] 6.6 –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏–≤—ã—á–µ–∫ —Ç—Ä–∞—Ç

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –§–∞–∑–∞ 1 ‚Üí 2 ‚Üí 3 (–∫—Ä–∏—Ç–∏—á–Ω–æ) ‚Üí 4 ‚Üí 5 ‚Üí 6
- **–í—Ä–µ–º—è:** ~20-30 —á–∞—Å–æ–≤ –Ω–∞ –ø–æ–ª–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –û–±–Ω–æ–≤–ª—è—Ç—å –ø–æ –º–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 15.12.2024*
