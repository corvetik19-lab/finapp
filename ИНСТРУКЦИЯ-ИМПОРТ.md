# Инструкция по тестовому импорту транзакций

## Шаг 1: Создать категории

Откройте Supabase Dashboard → SQL Editor и выполните:

```sql
-- Расходные категории
INSERT INTO categories (name, type, user_id, created_at, updated_at) VALUES
('Продукты', 'expense', auth.uid(), now(), now()),
('Кафе', 'expense', auth.uid(), now(), now()),
('Транспорт', 'expense', auth.uid(), now(), now()),
('Одежда', 'expense', auth.uid(), now(), now()),
('Здоровье', 'expense', auth.uid(), now(), now()),
('Развлечения', 'expense', auth.uid(), now(), now()),
('Электроника', 'expense', auth.uid(), now(), now()),
('Образование', 'expense', auth.uid(), now(), now()),
('Коммунальные', 'expense', auth.uid(), now(), now()),
('Прочее', 'income', auth.uid(), now(), now())
ON CONFLICT DO NOTHING;
```

## Шаг 2: Импортировать CSV

1. Откройте `http://localhost:3000/transactions`
2. Нажмите кнопку "Импорт"
3. Выберите файл `test-import-full.csv`
4. Нажмите "Импортировать"

## Тестовые данные

Файл содержит:
- **21 транзакция** за октябрь 2025
- **2 дохода**: 75,000₽ (зарплата) + 5,000₽ (фриланс) = **80,000₽**
- **19 расходов**: ~27,000₽
- **10 категорий**: Продукты, Кафе, Транспорт, Одежда, Здоровье, Развлечения, Электроника, Образование, Коммунальные, Прочее

## Ожидаемый результат

После импорта баланс "Основная карта" должен быть:
- Начальный: 10,000₽
- + Доходы: 80,000₽
- - Расходы: ~27,000₽
- **Итого: ~63,000₽**

## Проблема с Кубышкой

**ВАЖНО**: Сейчас импорт НЕ учитывает логику Кубышки!

Правильная логика должна быть:
1. Если Кубышка < 50,000₽ - доходы сначала пополняют Кубышку до 50,000₽
2. Если Кубышка = 50,000₽ (полная) - доходы идут на дебетовую карту
3. Расходы всегда с дебетовой карты

Нужно исправить логику создания транзакций!
