# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é RAG + KAG + Embeddings

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ß—Ç–æ —Ç–∞–∫–æ–µ RAG –∏ KAG](#—á—Ç–æ-—Ç–∞–∫–æ–µ-rag-–∏-kag)
2. [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è Embeddings](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-embeddings)
3. [–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ (RAG)](#–≤–µ–∫—Ç–æ—Ä–Ω—ã–π-–ø–æ–∏—Å–∫-rag)
4. [–ì—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π (KAG)](#–≥—Ä–∞—Ñ-–∑–Ω–∞–Ω–∏–π-kag)
5. [AI –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#ai-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
6. [–ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤](#–∞–Ω–∞–ª–∏–∑-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤)
7. [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ-–ø—Ä–∏–º–µ—Ä—ã)

---

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ RAG –∏ KAG

### RAG (Retrieval-Augmented Generation)
**–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Å–º—ã—Å–ª—É**

- –ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –≤ —á–∏—Å–ª–æ–≤—ã–µ –≤–µ–∫—Ç–æ—Ä—ã (embeddings)
- –ù–∞—Ö–æ–¥–∏—Ç –ø–æ—Ö–æ–∂–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ —Å–º—ã—Å–ª—É, –∞ –Ω–µ –ø–æ —Ç–æ—á–Ω—ã–º —Å–ª–æ–≤–∞–º
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ AI —á–∞—Ç–µ –¥–ª—è —É–º–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```
–ó–∞–ø—Ä–æ—Å: "—Ç–∞–∫—Å–∏"
–ù–∞–π–¥—ë—Ç: –Ø–Ω–¥–µ–∫—Å –¢–∞–∫—Å–∏, Uber, Bolt, –ø–æ–µ–∑–¥–∫–∞ –Ω–∞ –º–∞—à–∏–Ω–µ
```

### KAG (Knowledge-Augmented Generation)
**–ì—Ä–∞—Ñ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –¥–∞–Ω–Ω—ã–º–∏**

- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏, —Å—á–µ—Ç–∞–º–∏
- –ù–∞—Ö–æ–¥–∏—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ —Ç—Ä–∞—Ç–∞—Ö
- –î–∞—ë—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```
–ê–Ω–∞–ª–∏–∑: "–í—ã —á–∞—Å—Ç–æ —Ç—Ä–∞—Ç–∏—Ç–µ –Ω–∞ –∫–æ—Ñ–µ –ø–æ—Å–ª–µ –æ–±–µ–¥–∞"
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –±—Ä–∞—Ç—å –∫–æ—Ñ–µ —Å —Å–æ–±–æ–π –∏–∑ –¥–æ–º–∞"
```

---

## üîß –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Embeddings

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

```bash
npx tsx scripts/generate-embeddings.ts
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –°–∫—Ä–∏–ø—Ç –±–µ—Ä—ë—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±–µ–∑ embeddings (–ø–æ 100 –∑–∞ —Ä–∞–∑)
- –°–æ–∑–¥–∞—ë—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ: `"–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è -500‚ÇΩ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ï–¥–∞: –ö—É–ø–∏–ª –∫–æ—Ñ–µ"`
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ OpenAI API (–º–æ–¥–µ–ª—å `text-embedding-3-small`)
- –ü–æ–ª—É—á–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä –∏–∑ 1536 —á–∏—Å–µ–ª
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ —Å—Ç–æ–ª–±–µ—Ü `embedding` –≤ —Ç–∞–±–ª–∏—Ü–µ `transactions`

**–ü—Ä–æ–≥—Ä–µ—Å—Å:**
```
üöÄ –ù–∞—á–∏–Ω–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é embeddings...
üìä –ù–∞–π–¥–µ–Ω–æ 100 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –±–µ–∑ embeddings

‚è≥ –û–±—Ä–∞–±–æ—Ç–∫–∞: –ú–∞–≥–Ω–∏—Ç...
‚úÖ 1/100 - –ì–æ—Ç–æ–≤–æ

...

üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
‚úÖ –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 100
‚ùå –û—à–∏–±–æ–∫: 0
üìä –í—Å–µ–≥–æ: 100

üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ embeddings:
   –í—Å–µ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π: 270
   –° embeddings: 202
   –ë–µ–∑ embeddings: 68
   –ü–æ–∫—Ä—ã—Ç–∏–µ: 74.81%
```

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**–ß–µ—Ä–µ–∑ n8n (Telegram –±–æ—Ç):**

–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç embeddings –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —á–µ—Ä–µ–∑ API endpoint:

`POST /api/n8n/receipts`

---

## üîç –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ (RAG)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ AI —á–∞—Ç–µ

**–ü—Ä–æ—Å—Ç–æ —Å–ø—Ä–æ—Å–∏—Ç–µ –≤ —á–∞—Ç–µ:**

```
–¢—ã: "–ü–æ–∫–∞–∂–∏ –≤—Å–µ –∫–∞—Ñ–µ –∑–∞ –æ–∫—Ç—è–±—Ä—å"
AI: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∫–∞—Ñ–µ

–¢—ã: "–°–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–∞—Ç–∏–ª –Ω–∞ —Ç–∞–∫—Å–∏?"
AI: –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –≤–∏–¥—ã —Ç–∞–∫—Å–∏ –∏ –ø–æ–µ–∑–¥–æ–∫ ‚Üí —Å—É–º–º–∏—Ä—É–µ—Ç

–¢—ã: "–ì–¥–µ —è –µ–ª –≤ –ø—Ä–æ—à–ª–æ–º –º–µ—Å—è—Ü–µ?"
AI: –ù–∞—Ö–æ–¥–∏—Ç —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã, –∫–∞—Ñ–µ, –¥–æ—Å—Ç–∞–≤–∫—É –µ–¥—ã ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫
```

### API –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**Endpoint:** `POST /api/ai/search/transactions`

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "query": "–∫–æ—Ñ–µ",
  "limit": 10
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "results": [
    {
      "id": "uuid",
      "note": "–ö–æ—Ñ–µ Starbucks",
      "amount": -50000,
      "category": "–ï–¥–∞",
      "similarity": 0.92
    },
    {
      "id": "uuid", 
      "note": "–ö–æ—Ñ–µ–π–Ω—è",
      "amount": -30000,
      "similarity": 0.88
    }
  ]
}
```

---

## üï∏Ô∏è –ì—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π (KAG)

### –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞

**API:** `POST /api/ai/graph/build`

**–ß—Ç–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è:**
- –°–≤—è–∑–∏ –º–µ–∂–¥—É –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ (—á–∞—Å—Ç–æ –ø–æ–∫—É–ø–∞–µ–º—ã–µ –≤–º–µ—Å—Ç–µ)
- –°–≤—è–∑–∏ —Å–æ —Å—á–µ—Ç–∞–º–∏ (–æ—Ç–∫—É–¥–∞ –æ–±—ã—á–Ω–æ –ø–ª–∞—Ç–∏—Ç–µ)
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (–∫–æ–≥–¥–∞ –æ–±—ã—á–Ω–æ —Ç—Ä–∞—Ç–∏—Ç–µ)

**–ü—Ä–∏–º–µ—Ä –≥—Ä–∞—Ñ–∞:**
```
–ö–∞—Ç–µ–≥–æ—Ä–∏—è "–ï–¥–∞" ‚îÄ‚îÄ—Å–≤—è–∑–∞–Ω–∞‚îÄ‚îÄ> –ö–∞—Ç–µ–≥–æ—Ä–∏—è "–¢–∞–∫—Å–∏"
     ‚Üì                              ‚Üì
   –°—á—ë—Ç "–¢-–ë–∞–Ω–∫"              –°—á—ë—Ç "–¢-–ë–∞–Ω–∫"
     ‚Üì                              ‚Üì
–û–±—ã—á–Ω–æ: –æ–±–µ–¥ (12:00-14:00)   –û–±—ã—á–Ω–æ: –≤–µ—á–µ—Ä (18:00-22:00)
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞

**–ß–µ—Ä–µ–∑ API:**
```bash
curl -X POST http://localhost:3000/api/ai/graph/build \
  -H "Cookie: your-session-cookie"
```

**–ß–µ—Ä–µ–∑ AI —á–∞—Ç:**
```
–¢—ã: "–ü–æ—Å—Ç—Ä–æ–π –≥—Ä–∞—Ñ –º–æ–∏—Ö —Ç—Ä–∞—Ç"
AI: –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ ‚Üí "–ì—Ä–∞—Ñ –ø–æ—Å—Ç—Ä–æ–µ–Ω! –ù–∞–π–¥–µ–Ω–æ 150 —Å–≤—è–∑–µ–π"
```

---

## üí° AI –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**API:** `GET /api/ai/recommendations`

**–û—Ç–≤–µ—Ç:**
```json
{
  "recommendations": [
    {
      "type": "spending_pattern",
      "title": "–ß–∞—Å—Ç—ã–µ —Ç—Ä–∞—Ç—ã –Ω–∞ –∫–æ—Ñ–µ",
      "description": "–í—ã —Ç—Ä–∞—Ç–∏—Ç–µ –Ω–∞ –∫–æ—Ñ–µ 3000‚ÇΩ/–º–µ—Å—è—Ü",
      "suggestion": "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ—Ñ–µ –¥–æ–º–∞ - —ç–∫–æ–Ω–æ–º–∏—è –¥–æ 2000‚ÇΩ/–º–µ—Å",
      "confidence": 0.85,
      "category": "–ï–¥–∞"
    },
    {
      "type": "category_correlation",
      "title": "–°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",
      "description": "–ü–æ—Å–ª–µ —Ç—Ä–∞—Ç –Ω–∞ '–¢–∞–∫—Å–∏' –≤—ã —á–∞—Å—Ç–æ —Ç—Ä–∞—Ç–∏—Ç–µ –Ω–∞ '–†–µ—Å—Ç–æ—Ä–∞–Ω—ã'",
      "suggestion": "–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –±—é–¥–∂–µ—Ç –Ω–∞ —ç—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤–º–µ—Å—Ç–µ",
      "confidence": 0.78
    }
  ]
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ UI

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ AI Advisor** (`/ai-advisor`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –≥—Ä–∞—Ñ–∞
- –ú–æ–∂–Ω–æ –æ—Ç–º–µ—á–∞—Ç—å –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ

---

## üìä –ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

### –ù–∞–π—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ —Ç—Ä–∞—Ç–∞—Ö

**API:** `GET /api/ai/patterns`

**–û—Ç–≤–µ—Ç:**
```json
{
  "patterns": [
    {
      "type": "weekly",
      "description": "–ö–∞–∂–¥—É—é –ø—è—Ç–Ω–∏—Ü—É —Ç—Ä–∞—Ç—ã –Ω–∞ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ 150%",
      "categories": ["–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è", "–†–µ—Å—Ç–æ—Ä–∞–Ω—ã"],
      "avg_amount": 500000,
      "frequency": "weekly"
    },
    {
      "type": "monthly",
      "description": "–í –Ω–∞—á–∞–ª–µ –º–µ—Å—è—Ü–∞ (1-5 —á–∏—Å–ª–æ) –∫—Ä—É–ø–Ω—ã–µ —Ç—Ä–∞—Ç—ã –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—ã",
      "categories": ["–ü—Ä–æ–¥—É–∫—Ç—ã"],
      "avg_amount": 1500000,
      "frequency": "monthly"
    }
  ]
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ UI

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ AI Analytics** (`/ai-analytics`)
- –ì—Ä–∞—Ñ–∏–∫ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
- –ì—Ä–∞—Ñ–∏–∫ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## üéÆ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –£–º–Ω—ã–π –ø–æ–∏—Å–∫ –≤ —á–∞—Ç–µ

**–í–æ–ø—Ä–æ—Å:** "–°–∫–æ–ª—å–∫–æ —è —Ç—Ä–∞—á—É –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É –µ–¥—ã?"

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. AI —Å–æ–∑–¥–∞—ë—Ç embedding –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ "–¥–æ—Å—Ç–∞–≤–∫—É –µ–¥—ã"
2. –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ—Ö–æ–∂–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:
   - "–Ø–Ω–¥–µ–∫—Å –ï–¥–∞"
   - "–î–µ–ª–∏–≤–µ—Ä–∏"
   - "–°–∞–º–æ–∫–∞—Ç" (–ø—Ä–æ–¥—É–∫—Ç—ã)
   - "–ó–∞–∫–∞–∑ –ø–∏—Ü—Ü—ã"
3. –°—É–º–º–∏—Ä—É–µ—Ç –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ç—Ä–∞—Ç—ã
4. –û—Ç–≤–µ—á–∞–µ—Ç: "–ù–∞ –¥–æ—Å—Ç–∞–≤–∫—É –µ–¥—ã –≤—ã –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ 8,500‚ÇΩ –∑–∞ –º–µ—Å—è—Ü"

### –ü—Ä–∏–º–µ—Ä 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è

**–ù–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏–∑ Telegram:** "–ö—É–ø–∏–ª –∫–æ—Ñ–µ –≤ –°—Ç–∞—Ä–±–∞–∫—Å - 450‚ÇΩ"

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. n8n –ø–æ–ª—É—á–∞–µ—Ç —á–µ–∫ –∏–∑ Telegram
2. –°–æ–∑–¥–∞—ë—Ç embedding –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è
3. –ò—â–µ—Ç –ø–æ—Ö–æ–∂–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –ë–î
4. –ù–∞—Ö–æ–¥–∏—Ç —á—Ç–æ –ø–æ—Ö–æ–∂–∏–µ —Ç—Ä–∞—Ç—ã –æ–±—ã—á–Ω–æ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ï–¥–∞"
5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–ï–¥–∞"
6. –ï—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é

### –ü—Ä–∏–º–µ—Ä 3: –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á–∞—Å—Ç–æ —Ç—Ä–∞—Ç–∏—Ç –Ω–∞ —Ç–∞–∫—Å–∏ –ø–æ—Å–ª–µ 23:00

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ì—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–≤—è–∑–∏:
   - –ö–∞—Ç–µ–≥–æ—Ä–∏—è "–¢–∞–∫—Å–∏"
   - –í—Ä–µ–º—è: 23:00-02:00
   - –ß–∞—Å—Ç–æ—Ç–∞: 3-4 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é
   - –°—Ä–µ–¥–Ω—è—è —Å—É–º–º–∞: 800‚ÇΩ
2. AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é:
   - "–í—ã —Ç—Ä–∞—Ç–∏—Ç–µ –Ω–∞ –Ω–æ—á–Ω–æ–µ —Ç–∞–∫—Å–∏ ~12,000‚ÇΩ/–º–µ—Å"
   - "–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–∞—Ä—à–µ—Ä–∏–Ω–≥ - —ç–∫–æ–Ω–æ–º–∏—è –¥–æ 40%"
   - "–ò–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ –ø–æ–µ–∑–¥–∫–∏ –∑–∞—Ä–∞–Ω–µ–µ —á–µ—Ä–µ–∑ Uber –¥–ª—è —Å–∫–∏–¥–∫–∏"

### –ü—Ä–∏–º–µ—Ä 4: –ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω:**

```
üìä –ü–∞—Ç—Ç–µ—Ä–Ω: "–ü—è—Ç–Ω–∏—á–Ω—ã–µ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è"

–ß—Ç–æ: –ö–∞–∂–¥—É—é –ø—è—Ç–Ω–∏—Ü—É —Ç—Ä–∞—Ç—ã —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç—Å—è –≤ 2-3 —Ä–∞–∑–∞
–ö–∞—Ç–µ–≥–æ—Ä–∏–∏: –†–µ—Å—Ç–æ—Ä–∞–Ω—ã, –¢–∞–∫—Å–∏, –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
–°—Ä–µ–¥–Ω—è—è —Å—É–º–º–∞: 5,000‚ÇΩ
–ß–∞—Å—Ç–æ—Ç–∞: 4 —Ä–∞–∑–∞ –≤ –º–µ—Å—è—Ü = 20,000‚ÇΩ/–º–µ—Å

üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±—é–¥–∂–µ—Ç –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ: 15,000‚ÇΩ
- –ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è –∑–∞—Ä–∞–Ω–µ–µ –¥–ª—è –ª—É—á—à–∏—Ö —Ü–µ–Ω
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã: –¥–æ–º–∞—à–Ω–∏–µ –≤—Å—Ç—Ä–µ—á–∏, –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**1. –î–æ–±–∞–≤–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –≤ —Å–≤–æ–π –∫–æ–¥:**

```typescript
import { searchSimilarTransactions } from '@/lib/ai/embeddings';

// –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
const results = await searchSimilarTransactions({
  userId: 'user-id',
  query: '–∫–æ—Ñ–µ',
  limit: 10,
  threshold: 0.7 // –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ö–æ–∂–µ—Å—Ç—å
});
```

**2. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**

```typescript
import { buildTransactionGraph } from '@/lib/ai/knowledge-graph';

const relationsCount = await buildTransactionGraph('user-id');
console.log(`–°–æ–∑–¥–∞–Ω–æ ${relationsCount} —Å–≤—è–∑–µ–π`);
```

**3. –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

```typescript
import { getGraphBasedRecommendations } from '@/lib/ai/knowledge-graph';

const recommendations = await getGraphBasedRecommendations('user-id');
```

**4. –ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:**

```typescript
import { analyzeSpendingPatterns } from '@/lib/ai/knowledge-graph';

const patterns = await analyzeSpendingPatterns('user-id');
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ embeddings

```sql
-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ embeddings
SELECT 
  COUNT(*) as total,
  COUNT(embedding) as with_embeddings,
  COUNT(*) - COUNT(embedding) as without_embeddings,
  ROUND(COUNT(embedding)::numeric / COUNT(*)::numeric * 100, 2) as coverage_percent
FROM transactions
WHERE user_id = 'your-user-id';
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤—è–∑–µ–π –≤ –≥—Ä–∞—Ñ–µ

```sql
-- –í—Å–µ —Å–≤—è–∑–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
SELECT * FROM knowledge_graph
WHERE user_id = 'your-user-id'
ORDER BY confidence DESC
LIMIT 20;
```

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞ 5 –º–∏–Ω—É—Ç:

1. **–ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ embeddings:**
   ```bash
   npx tsx scripts/generate-embeddings.ts
   ```

2. **–ü–æ—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä–∞—Ñ:**
   ```bash
   curl -X POST http://localhost:3000/api/ai/graph/build
   ```

3. **–°–ø—Ä–æ—Å–∏—Ç–µ –≤ AI —á–∞—Ç–µ:**
   ```
   "–ì–¥–µ —è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ —Ç—Ä–∞—á—É –¥–µ–Ω—å–≥–∏?"
   "–ü–æ–∫–∞–∂–∏ –º–æ–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ç—Ä–∞—Ç"
   "–î–∞–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —ç–∫–æ–Ω–æ–º–∏–∏"
   ```

4. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
   - `/ai-chat` - —É–º–Ω—ã–π —á–∞—Ç —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º –ø–æ–∏—Å–∫–æ–º
   - `/ai-advisor` - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
   - `/ai-analytics` - –∞–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–£–º–Ω—ã–π –ø–æ–∏—Å–∫** - –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ —Å–º—ã—Å–ª—É, –∞ –Ω–µ –ø–æ —Å–ª–æ–≤–∞–º
‚úÖ **–ê–≤—Ç–æ–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è** - AI —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –ø–æ —ç–∫–æ–Ω–æ–º–∏–∏
‚úÖ **–ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤** - –Ω–∞—Ö–æ–¥–∏—Ç –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–∏ –≤ —Ç—Ä–∞—Ç–∞—Ö
‚úÖ **–ì—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π** - –ø–æ–Ω–∏–º–∞–µ—Ç —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç—Ä–∞—Ç–∞–º–∏
‚úÖ **AI —á–∞—Ç** - –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º –ø–æ–º–æ—â–Ω–∏–∫–æ–º

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `OPENAI_API_KEY` –≤ `.env.local`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ embeddings —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
3. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –≥—Ä–∞—Ñ –∑–Ω–∞–Ω–∏–π
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

**–ì–æ—Ç–æ–≤–æ! –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —É–º–Ω—ã–º —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º –ø–æ–º–æ—â–Ω–∏–∫–æ–º! üöÄ**
