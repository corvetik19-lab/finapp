# üéØ –†–µ–∂–∏–º "–¢–µ–Ω–¥–µ—Ä—ã" ‚Äî –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

> **–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready  
> **–í–µ—Ä—Å–∏—è:** 1.0.0  
> **–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ù–æ—è–±—Ä—å 2025

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
4. [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
5. [API Reference](#api-reference)
6. [–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–∫–æ–Ω—Ç—Ä–æ–ª—å-–¥–æ—Å—Ç—É–ø–∞-–∏-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
7. [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](#—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
8. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ï–ò–°](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-–µ–∏—Å)
9. [–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-–∏-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏)
10. [–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ](#—Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ)

---

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–†–µ–∂–∏–º "–¢–µ–Ω–¥–µ—Ä—ã" ‚Äî –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è CRM-—Å–∏—Å—Ç–µ–º–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–∞–∫—É–ø–∫–∞–º–∏ –∏ —Ç–µ–Ω–¥–µ—Ä–∞–º–∏. –°–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–Ω–¥–µ—Ä–∞–º–∏: –æ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –¢–∞–±–ª–∏—Ü –≤ –ë–î | 15+ |
| RLS –ø–æ–ª–∏—Ç–∏–∫ | 50+ |
| API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ | 40+ |
| React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | 25+ |
| –°—Ç—Ä–∞–Ω–∏—Ü | 35+ |
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | 20000+ |

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ü–æ–ª–Ω—ã–π CRUD —Ç–µ–Ω–¥–µ—Ä–æ–≤ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ 2 Kanban-–¥–æ—Å–∫–∏ (–¢–µ–Ω–¥–µ—Ä–Ω—ã–π –æ—Ç–¥–µ–ª + –†–µ–∞–ª–∏–∑–∞—Ü–∏—è)
- ‚úÖ –î–∞—à–±–æ—Ä–¥ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏ KPI
- ‚úÖ 8 –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö –æ—Ç—á—ë—Ç–æ–≤
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (9 —Ç–∏–ø–æ–≤)
- ‚úÖ –ó–∞–¥–∞—á–∏ –∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (Supabase Storage)
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- ‚úÖ –õ–æ–≥–∏—Å—Ç–∏–∫–∞ (–æ—Ç–ø—Ä–∞–≤–∫–∏, –≤–æ–¥–∏—Ç–µ–ª–∏)
- ‚úÖ –í–∑—ã—Å–∫–∞–Ω–∏–µ –¥–æ–ª–≥–æ–≤ (–ø—Ä–µ—Ç–µ–Ω–∑–∏–∏)
- ‚úÖ –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å –∏ RLS –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
–°—É–ø–µ—Ä-–∞–¥–º–∏–Ω (—Å–∏—Å—Ç–µ–º–∞)
    ‚Üì
–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è (Organization)
    ‚Üì 
–ö–æ–º–ø–∞–Ω–∏—è (Company)
    ‚Üì
–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (Employees) —Å —Ä–æ–ª—è–º–∏
    ‚Üì
–¢–µ–Ω–¥–µ—Ä—ã (Tenders)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
app/(protected)/tenders/
‚îú‚îÄ‚îÄ page.tsx                    # Redirect –Ω–∞ dashboard
‚îú‚îÄ‚îÄ dashboard/page.tsx          # –î–∞—à–±–æ—Ä–¥ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
‚îú‚îÄ‚îÄ department/page.tsx         # Kanban —Ç–µ–Ω–¥–µ—Ä–Ω–æ–≥–æ –æ—Ç–¥–µ–ª–∞ (14 —ç—Ç–∞–ø–æ–≤)
‚îú‚îÄ‚îÄ realization/page.tsx        # Kanban —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (6 —ç—Ç–∞–ø–æ–≤)
‚îú‚îÄ‚îÄ list/page.tsx               # –†–µ–µ—Å—Ç—Ä —Ç–µ–Ω–¥–µ—Ä–æ–≤ (—Ç–∞–±–ª–∏—Ü–∞)
‚îú‚îÄ‚îÄ [id]/page.tsx               # –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–µ–Ω–¥–µ—Ä–∞
‚îú‚îÄ‚îÄ calendar/page.tsx           # –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ–±—ã—Ç–∏–π
‚îú‚îÄ‚îÄ tasks/page.tsx              # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏
‚îú‚îÄ‚îÄ claims/page.tsx             # –í–∑—ã—Å–∫–∞–Ω–∏–µ –¥–æ–ª–≥–æ–≤
‚îú‚îÄ‚îÄ logistics/page.tsx          # –õ–æ–≥–∏—Å—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ employees/page.tsx          # –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
‚îú‚îÄ‚îÄ reports/                    # 8 –æ—Ç—á—ë—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ department/             # –û—Ç—á—ë—Ç –ø–æ —Ç–µ–Ω–¥–µ—Ä–Ω–æ–º—É –æ—Ç–¥–µ–ª—É
‚îÇ   ‚îú‚îÄ‚îÄ manager-performance/    # –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ realization/            # –û—Ç—á—ë—Ç –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ payments/               # –†–µ–µ—Å—Ç—Ä –æ–ø–ª–∞—Ç
‚îÇ   ‚îú‚îÄ‚îÄ statistics/             # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ guarantees/             # –õ–∏–Ω–µ–π–∫–∞ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ customer-payments/      # –î–µ–Ω—å–≥–∏ —É –∑–∞–∫–∞–∑—á–∏–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ expenses/               # –û—Ç—á—ë—Ç –ø–æ –≤—ã–ø–ª–∞—Ç–∞–º
‚îú‚îÄ‚îÄ notifications/              # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ settings/                   # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îî‚îÄ‚îÄ dictionaries/               # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (—Ç–∏–ø—ã, —ç—Ç–∞–ø—ã, –∑–∞–∫–∞–∑—á–∏–∫–∏)

app/api/tenders/
‚îú‚îÄ‚îÄ route.ts                    # GET/POST —Ç–µ–Ω–¥–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ [id]/route.ts               # GET/PATCH/DELETE –æ–¥–Ω–æ–≥–æ —Ç–µ–Ω–¥–µ—Ä–∞
‚îú‚îÄ‚îÄ [id]/history/route.ts       # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îú‚îÄ‚îÄ [id]/comments/route.ts      # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
‚îú‚îÄ‚îÄ [id]/attachments/route.ts   # –í–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ [id]/tasks/route.ts         # –ó–∞–¥–∞—á–∏ —Ç–µ–Ω–¥–µ—Ä–∞
‚îú‚îÄ‚îÄ stats/route.ts              # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ dashboard/route.ts          # –î–∞–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥–∞
‚îú‚îÄ‚îÄ types/route.ts              # –¢–∏–ø—ã —Ç–µ–Ω–¥–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ stages/route.ts             # –≠—Ç–∞–ø—ã
‚îú‚îÄ‚îÄ tasks/route.ts              # –ó–∞–¥–∞—á–∏
‚îú‚îÄ‚îÄ calendar/route.ts           # –ö–∞–ª–µ–Ω–¥–∞—Ä—å
‚îî‚îÄ‚îÄ notifications/              # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

components/tenders/
‚îú‚îÄ‚îÄ TenderFormModal.tsx         # –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ TenderKanban.tsx            # Kanban –¥–æ—Å–∫–∞
‚îú‚îÄ‚îÄ TendersTable.tsx            # –¢–∞–±–ª–∏—Ü–∞ —Ç–µ–Ω–¥–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ TendersFilters.tsx          # –§–∏–ª—å—Ç—Ä—ã
‚îú‚îÄ‚îÄ TenderHistory.tsx           # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îú‚îÄ‚îÄ TenderComments.tsx          # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
‚îú‚îÄ‚îÄ TenderAttachments.tsx       # –í–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ NotificationBell.tsx        # –ö–æ–ª–æ–∫–æ–ª—å—á–∏–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îú‚îÄ‚îÄ dashboard/                  # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–∞—à–±–æ—Ä–¥–∞
‚îú‚îÄ‚îÄ tasks/                      # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–¥–∞—á
‚îú‚îÄ‚îÄ reports/                    # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—Ç—á—ë—Ç–æ–≤
‚îî‚îÄ‚îÄ settings/                   # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫

lib/tenders/
‚îú‚îÄ‚îÄ service.ts                  # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å CRUD
‚îú‚îÄ‚îÄ dashboard-service.ts        # –°–µ—Ä–≤–∏—Å –¥–∞—à–±–æ—Ä–¥–∞
‚îú‚îÄ‚îÄ tasks-service.ts            # –°–µ—Ä–≤–∏—Å –∑–∞–¥–∞—á
‚îú‚îÄ‚îÄ calendar-service.ts         # –°–µ—Ä–≤–∏—Å –∫–∞–ª–µ–Ω–¥–∞—Ä—è
‚îú‚îÄ‚îÄ *-report-service.ts         # –°–µ—Ä–≤–∏—Å—ã –æ—Ç—á—ë—Ç–æ–≤ (8 —Ñ–∞–π–ª–æ–≤)
‚îú‚îÄ‚îÄ types.ts                    # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ validation.ts               # Zod —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ eis-mock-data.ts            # –ú–æ–∫ –¥–∞–Ω–Ω—ã–µ –ï–ò–°
```

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ú–∏–≥—Ä–∞—Ü–∏–∏

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `0100_create_organizations_system.sql` | –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ–º–ø–∞–Ω–∏–∏, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ |
| `0101_create_tenders_system.sql` | –¢–µ–Ω–¥–µ—Ä—ã, —ç—Ç–∞–ø—ã, —Ç–∏–ø—ã, –∏—Å—Ç–æ—Ä–∏—è |
| `0102_create_notifications_system.sql` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| `0103_create_employees_system.sql` | –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ |
| `0104_create_tasks_calendar_system.sql` | –ó–∞–¥–∞—á–∏, –∫–∞–ª–µ–Ω–¥–∞—Ä—å, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è |
| `0105_create_logistics_system.sql` | –õ–æ–≥–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ |

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

#### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```sql
-- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
CREATE TABLE organizations (
  id UUID PRIMARY KEY,
  name TEXT NOT NULL,
  allowed_modes TEXT[] DEFAULT '{}',  -- ['finance','tenders','investments']
  settings JSONB DEFAULT '{}',
  status TEXT DEFAULT 'active',
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ö–æ–º–ø–∞–Ω–∏–∏
CREATE TABLE companies (
  id UUID PRIMARY KEY,
  organization_id UUID REFERENCES organizations(id),
  name TEXT NOT NULL,
  inn TEXT,
  kpp TEXT,
  settings JSONB DEFAULT '{}'
);

-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∫–æ–º–ø–∞–Ω–∏–π
CREATE TABLE company_members (
  id UUID PRIMARY KEY,
  company_id UUID REFERENCES companies(id),
  user_id UUID REFERENCES auth.users(id),
  role TEXT NOT NULL,  -- 'admin', 'manager', 'specialist', 'viewer'
  permissions JSONB DEFAULT '{}',
  status TEXT DEFAULT 'active'
);
```

#### –¢–µ–Ω–¥–µ—Ä—ã

```sql
CREATE TABLE tenders (
  id UUID PRIMARY KEY,
  company_id UUID NOT NULL REFERENCES companies(id),
  created_by UUID NOT NULL REFERENCES profiles(id),
  
  -- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  purchase_number TEXT NOT NULL,
  project_name TEXT,
  subject TEXT NOT NULL,
  method TEXT,
  type_id UUID REFERENCES tender_types(id),
  customer TEXT NOT NULL,
  customer_id UUID REFERENCES customers(id),
  city TEXT,
  platform TEXT,
  
  -- –§–∏–Ω–∞–Ω—Å—ã (–≤ –∫–æ–ø–µ–π–∫–∞—Ö –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏)
  nmck BIGINT NOT NULL,
  our_price BIGINT,
  contract_price BIGINT,
  application_security BIGINT,
  contract_security BIGINT,
  
  -- –î–∞—Ç—ã
  submission_deadline TIMESTAMPTZ NOT NULL,
  auction_date TIMESTAMPTZ,
  results_date TIMESTAMPTZ,
  review_date TIMESTAMPTZ,
  
  -- –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ
  manager_id UUID REFERENCES profiles(id),
  specialist_id UUID REFERENCES profiles(id),
  investor_id UUID REFERENCES profiles(id),
  executor_id UUID REFERENCES profiles(id),
  
  -- –°—Ç–∞—Ç—É—Å –∏ —ç—Ç–∞–ø
  stage_id UUID NOT NULL REFERENCES tender_stages(id),
  status TEXT NOT NULL DEFAULT 'active',  -- 'active', 'won', 'lost', 'archived'
  
  -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  comment TEXT,
  tags TEXT[],
  metadata JSONB DEFAULT '{}',
  
  -- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  deleted_at TIMESTAMPTZ,
  
  -- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
  search_vector TSVECTOR GENERATED ALWAYS AS (
    to_tsvector('russian', 
      coalesce(purchase_number, '') || ' ' ||
      coalesce(subject, '') || ' ' ||
      coalesce(customer, '')
    )
  ) STORED
);
```

#### –≠—Ç–∞–ø—ã —Ç–µ–Ω–¥–µ—Ä–æ–≤

```sql
CREATE TABLE tender_stages (
  id UUID PRIMARY KEY,
  company_id UUID REFERENCES companies(id),  -- NULL = —Å–∏—Å—Ç–µ–º–Ω—ã–π
  name TEXT NOT NULL,
  category TEXT NOT NULL,  -- 'tender_dept', 'realization'
  order_index INTEGER NOT NULL,
  color TEXT,
  is_final BOOLEAN DEFAULT FALSE,
  is_system BOOLEAN DEFAULT FALSE,
  is_active BOOLEAN DEFAULT TRUE
);

-- –°–∏—Å—Ç–µ–º–Ω—ã–µ —ç—Ç–∞–ø—ã: –¢–µ–Ω–¥–µ—Ä–Ω—ã–π –æ—Ç–¥–µ–ª (14)
-- –ê–Ω–∞–ª–∏–∑ –∏ –ø—Ä–æ—Å—á—ë—Ç ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ ‚Üí –ü–æ–¥–∞—á–∞ ‚Üí –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ ‚Üí –¢–æ—Ä–≥–∏ ‚Üí 
-- –ñ–¥—ë–º –∏—Ç–æ–≥–∏ ‚Üí –ü–æ–±–µ–¥–∞. –ñ–¥—ë–º –¥–æ–≥–æ–≤–æ—Ä ‚Üí –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞ ‚Üí –î–æ–≥–æ–≤–æ—Ä –ø–æ–¥–ø–∏—Å–∞–Ω ‚Üí
-- –ù–µ —É—á–∞—Å—Ç–≤—É–µ–º ‚Üí –ù–µ –ø—Ä–æ—à–ª–æ –ø—Ä–æ–≤–µ—Ä–∫—É ‚Üí –ù–µ –ø–æ–¥–∞–Ω–æ ‚Üí –ü—Ä–æ–∏–≥—Ä–∞–ª–∏ ‚Üí –î–æ–≥–æ–≤–æ—Ä –Ω–µ –∑–∞–∫–ª—é—á–µ–Ω

-- –°–∏—Å—Ç–µ–º–Ω—ã–µ —ç—Ç–∞–ø—ã: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (6)
-- –ù–æ–≤—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã ‚Üí –ñ–¥—ë–º –∑–∞—è–≤–∫–∏ ‚Üí –í –ø–æ—Å—Ç–∞–≤–∫–µ ‚Üí –ù–∞ –æ–ø–ª–∞—Ç–µ ‚Üí –ü–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–º ‚Üí –ó–∞–≤–µ—Ä—à–µ–Ω
```

#### –ó–∞–¥–∞—á–∏

```sql
CREATE TABLE tender_tasks (
  id UUID PRIMARY KEY,
  company_id UUID NOT NULL REFERENCES companies(id),
  tender_id UUID REFERENCES tenders(id),
  title TEXT NOT NULL,
  description TEXT,
  status TEXT DEFAULT 'pending',  -- 'pending', 'in_progress', 'completed', 'cancelled'
  priority TEXT DEFAULT 'normal',  -- 'low', 'normal', 'high', 'urgent'
  due_date TIMESTAMPTZ,
  assigned_to UUID REFERENCES profiles(id),
  created_by UUID NOT NULL REFERENCES profiles(id),
  checklist JSONB DEFAULT '[]',  -- [{id, text, completed}]
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```sql
CREATE TABLE tender_notifications (
  id UUID PRIMARY KEY,
  company_id UUID NOT NULL REFERENCES companies(id),
  user_id UUID NOT NULL REFERENCES profiles(id),
  tender_id UUID REFERENCES tenders(id),
  type TEXT NOT NULL,  -- 9 —Ç–∏–ø–æ–≤
  title TEXT NOT NULL,
  message TEXT,
  link TEXT,
  priority TEXT DEFAULT 'normal',
  is_read BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
-- deadline_approaching, deadline_passed, stage_changed, 
-- assigned, comment_added, file_uploaded, status_changed, 
-- reminder, system
```

---

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä–∞–º–∏

**CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏:**
- –°–æ–∑–¥–∞–Ω–∏–µ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π (Zod —Å—Ö–µ–º—ã)
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ inline –∏ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É
- –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (soft delete)
- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
- –ü–æ —Å—Ç–∞—Ç—É—Å—É (active, won, lost, archived)
- –ü–æ —ç—Ç–∞–ø—É
- –ü–æ —Ç–∏–ø—É –∑–∞–∫—É–ø–∫–∏
- –ü–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–º—É –º–µ–Ω–µ–¥–∂–µ—Ä—É
- –ü–æ –¥–∞—Ç–∞–º
- –ü–æ –∑–∞–∫–∞–∑—á–∏–∫—É

### 2. Kanban-–¥–æ—Å–∫–∏

**–¢–µ–Ω–¥–µ—Ä–Ω—ã–π –æ—Ç–¥–µ–ª (14 —ç—Ç–∞–ø–æ–≤):**
- Drag & drop –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ (–Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–ø—Ä—ã–≥–∏–≤–∞—Ç—å)
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —ç—Ç–∞–ø–∞ "–ü—Ä–æ–≤–µ—Ä–∫–∞"
- –°—á—ë—Ç—á–∏–∫–∏: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ + —Å—É–º–º–∞ –ù–ú–¶–ö
- –¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è (6 —ç—Ç–∞–ø–æ–≤):**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–æ–π
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è:**
```typescript
// –° —ç—Ç–∞–ø–∞ "–ü—Ä–æ–≤–µ—Ä–∫–∞" –º–æ–∂–Ω–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤:
const allowedFromCheck = ['–ü–æ–¥–∞—á–∞', '–ù–µ —É—á–∞—Å—Ç–≤—É–µ–º', '–ù–µ –ø—Ä–æ—à–ª–æ –ø—Ä–æ–≤–µ—Ä–∫—É', '–ù–µ –ø–æ–¥–∞–Ω–æ'];

// –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö ‚Äî —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–æ—Å–µ–¥–Ω–∏–π —ç—Ç–∞–ø
const canMove = Math.abs(toIndex - fromIndex) === 1;
```

### 3. –î–∞—à–±–æ—Ä–¥

**KPI –∫–∞—Ä—Ç–æ—á–∫–∏:**
- –í—Å–µ–≥–æ —Ç–µ–Ω–¥–µ—Ä–æ–≤ / –ê–∫—Ç–∏–≤–Ω—ã—Ö / –ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏
- –í—ã–∏–≥—Ä–∞–Ω–æ / –ü—Ä–æ–∏–≥—Ä–∞–Ω–æ / % –ø–æ–±–µ–¥
- –û–±—â–∞—è –ù–ú–¶–ö / –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- –≠–∫–æ–Ω–æ–º–∏—è / –°—Ä–µ–¥–Ω–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç

**–ì—Ä–∞—Ñ–∏–∫–∏:**
- –ü–æ —ç—Ç–∞–ø–∞–º (progress bars)
- –ü–æ —Ç–∏–ø–∞–º –∑–∞–∫—É–ø–æ–∫
- –î–∏–Ω–∞–º–∏–∫–∞ –∑–∞ 12 –º–µ—Å—è—Ü–µ–≤ (bar chart)

**–°–ø–∏—Å–∫–∏:**
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä—ã
- –ë–ª–∏–∂–∞–π—à–∏–µ –¥–µ–¥–ª–∞–π–Ω—ã
- –¢–æ–ø –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- –°–≤–æ–¥–∫–∞ –ø–æ –∑–∞–¥–∞—á–∞–º

### 4. –û—Ç—á—ë—Ç—ã (8 —à—Ç.)

| –û—Ç—á—ë—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| –¢–µ–Ω–¥–µ—Ä–Ω—ã–π –æ—Ç–¥–µ–ª | 6 –º–µ—Ç—Ä–∏–∫, –∞–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ |
| –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ | –†–µ–π—Ç–∏–Ω–≥, 9 –º–µ—Ç—Ä–∏–∫ –Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞, KPI |
| –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –ø—Ä–æ–±–ª–µ–º—ã, –¥–∏–Ω–∞–º–∏–∫–∞ |
| –†–µ–µ—Å—Ç—Ä –æ–ø–ª–∞—Ç | –ü–ª–∞—Ç–µ–∂–∏ –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º |
| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | –û–±—â–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |
| –õ–∏–Ω–µ–π–∫–∞ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è | –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏ |
| –î–µ–Ω—å–≥–∏ —É –∑–∞–∫–∞–∑—á–∏–∫–æ–≤ | –î–µ–±–∏—Ç–æ—Ä—Å–∫–∞—è –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å |
| –û—Ç—á—ë—Ç –ø–æ –≤—ã–ø–ª–∞—Ç–∞–º | –†–∞—Å—Ö–æ–¥—ã –∏ –≤—ã–ø–ª–∞—Ç—ã |

### 5. –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**9 —Ç–∏–ø–æ–≤:**
1. ‚è∞ –ü—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è —Å—Ä–æ–∫ (deadline_approaching)
2. üö® –°—Ä–æ–∫ –ø—Ä–æ—à—ë–ª (deadline_passed)
3. üîÑ –ò–∑–º–µ–Ω–∏–ª—Å—è —ç—Ç–∞–ø (stage_changed)
4. üë§ –ù–∞–∑–Ω–∞—á–µ–Ω –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º (assigned)
5. üí¨ –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (comment_added)
6. üìé –ó–∞–≥—Ä—É–∂–µ–Ω —Ñ–∞–π–ª (file_uploaded)
7. üìä –ò–∑–º–µ–Ω–∏–ª—Å—è —Å—Ç–∞—Ç—É—Å (status_changed)
8. üîî –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ (reminder)
9. ‚ÑπÔ∏è –°–∏—Å—Ç–µ–º–Ω–æ–µ (system)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º
- Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- Push –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (urgent/high/normal/low)

### 6. –ó–∞–¥–∞—á–∏ –∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—å

**–ó–∞–¥–∞—á–∏:**
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Ç–µ–Ω–¥–µ—Ä—É
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (low/normal/high/urgent)
- –°—Ç–∞—Ç—É—Å—ã (pending/in_progress/completed/cancelled)
- –ß–µ–∫-–ª–∏—Å—Ç—ã –ø–æ–¥–∑–∞–¥–∞—á
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö
- –î–µ–¥–ª–∞–π–Ω—ã

**–ö–∞–ª–µ–Ω–¥–∞—Ä—å:**
- 9 —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Ç–µ–Ω–¥–µ—Ä–∞–º
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è: –º–µ—Å—è—Ü/–Ω–µ–¥–µ–ª—è/–¥–µ–Ω—å

### 7. –í–ª–æ–∂–µ–Ω–∏—è

- –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Supabase Storage
- Drag & drop
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- –õ–∏–º–∏—Ç 10 –ú–ë –Ω–∞ —Ñ–∞–π–ª
- –ò–∫–æ–Ω–∫–∏ –ø–æ —Ç–∏–ø—É —Ñ–∞–π–ª–∞
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏

---

## API Reference

### –¢–µ–Ω–¥–µ—Ä—ã

```typescript
// –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫
GET /api/tenders?company_id=uuid&search=text&status=active&limit=50

// –°–æ–∑–¥–∞—Ç—å
POST /api/tenders
{ company_id, purchase_number, subject, customer, nmck, stage_id, ... }

// –ü–æ–ª—É—á–∏—Ç—å –æ–¥–∏–Ω
GET /api/tenders/[id]

// –û–±–Ω–æ–≤–∏—Ç—å
PATCH /api/tenders/[id]
{ subject?, nmck?, stage_id?, ... }

// –£–¥–∞–ª–∏—Ç—å
DELETE /api/tenders/[id]
```

### –î–∞—à–±–æ—Ä–¥

```typescript
GET /api/tenders/dashboard?company_id=uuid

Response: {
  overview: { totalTenders, activeTenders, wonTenders, lostTenders, ... },
  byStage: [{ stage, count, nmck, color, percent }],
  byType: [{ type, count, nmck, percent }],
  monthly: [{ month, count, won, lost, nmck }],
  topManagers: [{ id, name, totalTenders, wonTenders, winRate }],
  recentTenders: [...],
  upcomingDeadlines: [...],
  taskSummary: { total, pending, inProgress, completed, overdue }
}
```

### –ó–∞–¥–∞—á–∏

```typescript
GET /api/tenders/tasks?company_id=uuid&status=pending&assigned_to=uuid

POST /api/tenders/tasks
{ company_id, title, description?, priority, due_date?, assigned_to?, tender_id?, checklist? }

PATCH /api/tenders/tasks/[id]
{ status?, title?, checklist?, ... }
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```typescript
GET /api/tenders/notifications?unread_only=true&limit=50

PATCH /api/tenders/notifications/[id]
{ is_read: true }

DELETE /api/tenders/notifications/[id]
```

---

## –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ò–µ—Ä–∞—Ä—Ö–∏—è —Ä–æ–ª–µ–π

| –£—Ä–æ–≤–µ–Ω—å | –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|------|----------|
| 1 | **Super Admin** | –í–ª–∞–¥–µ–ª–µ—Ü –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã. –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø. –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –∏ –∞–¥–º–∏–Ω–æ–≤. |
| 2 | **Admin** | –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∞–¥–º–∏–Ω. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏ (–∫—Ä–æ–º–µ Super Admin). |
| 3 | **Organization Admin** | –í–ª–∞–¥–µ–ª–µ—Ü –∫–æ–º–ø–∞–Ω–∏–∏. –ü–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –≤–Ω—É—Ç—Ä–∏ —Å–≤–æ–µ–π –∫–æ–º–ø–∞–Ω–∏–∏. |
| 4 | **Manager** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä–∞–º–∏, –∑–∞–¥–∞—á–∞–º–∏. –ë–µ–∑ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏. |
| 5 | **Specialist** | –†–∞–±–æ—Ç–∞ —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ —Ç–µ–Ω–¥–µ—Ä–∞–º–∏. |
| 6 | **Viewer** | –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä. |

### –ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∞–≤

| –î–µ–π—Å—Ç–≤–∏–µ | Super Admin | Org Admin | Manager | Specialist | Viewer |
|----------|-------------|-----------|---------|------------|--------|
| –°–æ–∑–¥–∞—Ç—å —Ç–µ–Ω–¥–µ—Ä | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å | ‚úÖ | ‚úÖ | ‚úÖ (—Å–≤–æ–∏) | ‚úÖ (–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ) | ‚ùå |
| –£–¥–∞–ª–∏—Ç—å | ‚úÖ | ‚úÖ | ‚úÖ (—Å–≤–æ–∏) | ‚ùå | ‚ùå |
| –ò–∑–º–µ–Ω–∏—Ç—å —ç—Ç–∞–ø | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ (–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ) | ‚ùå |
| –ü—Ä–æ—Å–º–æ—Ç—Ä | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå | ‚ùå |

### –ò–∑–æ–ª—è—Ü–∏—è —Ä–µ–∂–∏–º–æ–≤ (Mode Isolation)

**–ú–µ—Ö–∞–Ω–∏–∑–º:**
1. –í `organizations.allowed_modes` —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–∫–ª—é—á—ë–Ω–Ω—ã–µ —Ä–µ–∂–∏–º—ã
2. –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤
3. Layouts –ø—Ä–æ–≤–µ—Ä—è—é—Ç –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ `hasUserModeAccess(mode)`
4. –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø—Ä—è–º–æ–≥–æ –≤—Ö–æ–¥–∞ ‚Äî —Ä–µ–¥–∏—Ä–µ–∫—Ç

**–ü—Ä–∏–º–µ—Ä:** –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å `allowed_modes: ['tenders']` –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ "–¢–µ–Ω–¥–µ—Ä–Ω—É—é CRM", –Ω–µ –∑–Ω–∞—è –æ —Ñ–∏–Ω–∞–Ω—Å–∞—Ö –∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è—Ö.

### RLS –ø–æ–ª–∏—Ç–∏–∫–∏

```sql
-- –ü—Ä–∏–º–µ—Ä –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Ç–µ–Ω–¥–µ—Ä–æ–≤
CREATE POLICY "Users can view tenders in their company"
ON tenders FOR SELECT
USING (
  company_id IN (
    SELECT company_id FROM company_members 
    WHERE user_id = auth.uid() AND status = 'active'
  )
);

CREATE POLICY "Managers can create tenders"
ON tenders FOR INSERT
WITH CHECK (
  company_id IN (
    SELECT company_id FROM company_members 
    WHERE user_id = auth.uid() 
    AND role IN ('admin', 'manager')
  )
);
```

---

## –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –í–æ–π–¥–∏—Ç–µ (email + –ø–∞—Ä–æ–ª—å)
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º "–¢–µ–Ω–¥–µ—Ä—ã"

### –ù–∞–≤–∏–≥–∞—Ü–∏—è

| –†–∞–∑–¥–µ–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| **–î–∞—à–±–æ—Ä–¥** | –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ KPI |
| **–¢–µ–Ω–¥–µ—Ä–Ω—ã–π –æ—Ç–¥–µ–ª** | Kanban —Å 14 —ç—Ç–∞–ø–∞–º–∏ |
| **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è** | Kanban –ø–æ—Å—Ç–∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã |
| **–†–µ–µ—Å—Ç—Ä —Ç–µ–Ω–¥–µ—Ä–æ–≤** | –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ (—Ç–∞–±–ª–∏—Ü–∞) |
| **–ö–∞–ª–µ–Ω–¥–∞—Ä—å** | –°–æ–±—ã—Ç–∏—è –∏ –¥–µ–¥–ª–∞–π–Ω—ã |
| **–ó–∞–¥–∞—á–∏** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏ |
| **–û—Ç—á—ë—Ç—ã** | 8 –≤–∏–¥–æ–≤ –æ—Ç—á—ë—Ç–æ–≤ |
| **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏** | –¢–∏–ø—ã, —ç—Ç–∞–ø—ã, –∑–∞–∫–∞–∑—á–∏–∫–∏ |
| **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã |

### –†–∞–±–æ—Ç–∞ —Å —Ç–µ–Ω–¥–µ—Ä–∞–º–∏

**–°–æ–∑–¥–∞–Ω–∏–µ:**
1. –ù–∞–∂–º–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–Ω–¥–µ—Ä"
2. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–∫—É–ø–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –ï–ò–° (–∏–ª–∏ "–î–æ–±–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é")
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

**Kanban:**
- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Å—á—ë—Ç—á–∏–∫–∞–º–∏

**–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:**
- 4 –≤–∫–ª–∞–¥–∫–∏: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –ò—Å—Ç–æ—Ä–∏—è, –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –í–ª–æ–∂–µ–Ω–∏—è
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É ‚úèÔ∏è
- –°–∞–π–¥–±–∞—Ä —Å —Ç–µ–∫—É—â–∏–º —ç—Ç–∞–ø–æ–º

### –°–æ–≤–µ—Ç—ã

- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–∞—à–±–æ—Ä–¥ –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–µ–∫-–ª–∏—Å—Ç—ã –≤ –∑–∞–¥–∞—á–∞—Ö
- –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å—Ä–∞–∑—É
- –î–æ–±–∞–≤–ª—è–π—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —ç—Ç–∞–ø–∞

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ï–ò–°

### –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–∑ –ï–ò–°

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ù–∞–∂–º–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–Ω–¥–µ—Ä"
2. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–∫—É–ø–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `32515383401`)
3. –ù–∞–∂–º–∏—Ç–µ "üîç –ù–∞–π—Ç–∏"
4. –§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ–º—ã–µ –ø–æ–ª—è:**
- –ù–æ–º–µ—Ä –∑–∞–∫—É–ø–∫–∏
- –ü—Ä–µ–¥–º–µ—Ç –∑–∞–∫—É–ø–∫–∏
- –ó–∞–∫–∞–∑—á–∏–∫
- –ù–ú–¶–ö
- –°–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- –¢–∏–ø (–§–ó-223/–§–ó-44)
- –ü–ª–æ—â–∞–¥–∫–∞
- –î–∞—Ç—ã

### –¢–µ—Å—Ç–æ–≤—ã–µ –Ω–æ–º–µ—Ä–∞

| –ù–æ–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `32515383401` | –ü–æ—Å—Ç–∞–≤–∫–∞ —Ä–∞—Å—Ö–æ–¥–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (–§–ó-223) |
| `32312315116` | –°–ò–ü –ø—Ä–æ–≤–æ–¥ (–§–ó-44) |
| `32409876543` | –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ (–§–ó-44) |

### –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–î–ª—è production –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á –Ω–∞ zakupki.gov.ru
2. –î–æ–±–∞–≤–∏—Ç—å –≤ `.env`: `EIS_API_KEY=your_key`
3. –ó–∞–º–µ–Ω–∏—Ç—å –º–æ–∫-—Ñ—É–Ω–∫—Ü–∏—é –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏

### –≠—Ç–∞–ø—ã —Ç–µ–Ω–¥–µ—Ä–æ–≤

**CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏:**
- ‚ûï –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–∞–ø
- ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
- ‚¨ÜÔ∏è‚¨áÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫

**–ü–æ–ª—è:**
- –ù–∞–∑–≤–∞–Ω–∏–µ
- –ö–∞—Ç–µ–≥–æ—Ä–∏—è (–¢–µ–Ω–¥–µ—Ä–Ω—ã–π –æ—Ç–¥–µ–ª / –†–µ–∞–ª–∏–∑–∞—Ü–∏—è)
- –¶–≤–µ—Ç
- –ü–æ—Ä—è–¥–æ–∫
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### –¢–∏–ø—ã —Ç–µ–Ω–¥–µ—Ä–æ–≤

**–°–∏—Å—Ç–µ–º–Ω—ã–µ:**
- –§–ó-44
- –§–ó-223
- –§–ó-275
- –ü–ü-615
- –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ:**
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–∏—Ö —Ç–∏–ø–æ–≤
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –£–¥–∞–ª–µ–Ω–∏–µ

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ —Ç–∏–ø–∞–º —Å–æ–±—ã—Ç–∏–π
- Email/Push –∫–∞–Ω–∞–ª—ã
- –ß–∞—Å—Ç–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏

---

## –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
NEXT_PUBLIC_SUPABASE_URL=your-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-key
EIS_API_KEY=your-eis-key  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
psql -U postgres -d your_database -f db/migrations/0100_create_organizations_system.sql
psql -U postgres -d your_database -f db/migrations/0101_create_tenders_system.sql
# ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
```

### Supabase Storage

```sql
INSERT INTO storage.buckets (id, name, public)
VALUES ('tender-attachments', 'tender-attachments', false);
```

### Vercel

```bash
vercel --prod
```

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
5. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

### –õ–æ–≥–∏

- –ë—Ä–∞—É–∑–µ—Ä: DevTools ‚Üí Console
- –°–µ—Ä–≤–µ—Ä: Supabase Dashboard ‚Üí Logs
- API: Network tab –≤ DevTools

---

**–†–µ–∂–∏–º "–¢–µ–Ω–¥–µ—Ä—ã" –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

–°–∏—Å—Ç–µ–º–∞ –ø–æ–º–æ–≥–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ–Ω–¥–µ—Ä–∞–º–∏ –∏ –≤—ã–∏–≥—Ä—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.
