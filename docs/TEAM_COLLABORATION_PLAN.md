# ðŸ“‹ ÐŸÐ»Ð°Ð½ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð±Ð»Ð¾ÐºÐ° "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð½Ð°Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð°"

> **Ð”Ð°Ñ‚Ð° Ð½Ð°Ñ‡Ð°Ð»Ð°:** 12.12.2024
> **Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** âœ… ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°
> **ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾:** 14.12.2024

---

## ðŸŽ¯ ÐšÐ¾Ð½Ñ†ÐµÐ¿Ñ†Ð¸Ñ

Ð‘Ð»Ð¾Ðº "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð½Ð°Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð°" â€” Ð¼Ð¾Ð´ÑƒÐ»ÑŒ Ð´Ð»Ñ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð½Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð½Ð°Ð´ Ñ‚ÐµÐ½Ð´ÐµÑ€Ð°Ð¼Ð¸.

- **Ð”Ð¾ÑÑ‚ÑƒÐ¿:** Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½Ð° Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸ (ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ)
- **Ð¡Ð¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¸:** Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ Ð² Ñ€Ð°Ð¼ÐºÐ°Ñ… Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ð¸Ð¹ Ð¾Ñ‚ Ð°Ð´Ð¼Ð¸Ð½Ð°

---

## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¼ÐµÐ½ÑŽ

Ð¢ÐµÐ½Ð´ÐµÑ€Ñ‹ (Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ)
â”œâ”€â”€ ÐžÐ±Ð·Ð¾Ñ€
â”‚   â”œâ”€â”€ Ð”Ð°ÑˆÐ±Ð¾Ñ€Ð´
â”‚   â”œâ”€â”€ Ð¢ÐµÐ½Ð´ÐµÑ€Ð½Ñ‹Ð¹ Ð¾Ñ‚Ð´ÐµÐ»
â”‚   â”œâ”€â”€ Ð ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ
â”‚   â””â”€â”€ ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ
â”œâ”€â”€ Ð Ð°Ð±Ð¾Ñ‚Ð°
â”‚   â”œâ”€â”€ Ð—Ð°Ð´Ð°Ñ‡Ð¸
â”‚   â””â”€â”€ Ð ÐµÐµÑÑ‚Ñ€ Ñ‚ÐµÐ½Ð´ÐµÑ€Ð¾Ð²
â””â”€â”€ ðŸ†• ÐšÐ¾Ð¼Ð°Ð½Ð´Ð½Ð°Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð° (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½Ð° Ð² Ð¿Ð¾Ð»Ð½Ð¾Ð¼ Ñ€ÐµÐ¶Ð¸Ð¼Ðµ)
    â”œâ”€â”€ Ð§Ð°Ñ‚
    â”œâ”€â”€ ÐšÐ¾Ð½Ñ„ÐµÑ€ÐµÐ½Ñ†Ð¸Ð¸ (Jitsi)
    â”œâ”€â”€ ÐšÐ°Ð½Ð±Ð°Ð½-Ð´Ð¾ÑÐºÐ¸
    â”œâ”€â”€ Ð¡Ð¿Ñ€Ð¸Ð½Ñ‚Ñ‹
    â”œâ”€â”€ Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹
    â””â”€â”€ ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ Ð·Ð°Ð½ÑÑ‚Ð¾ÑÑ‚Ð¸

---

## âœ… ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸

### Ð­Ñ‚Ð°Ð¿ 1: Ð˜Ð½Ñ„Ñ€Ð°ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° âœ…

- [x] 1.1 Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¹ Ð‘Ð” (`db/migrations/20251212_team_collaboration.sql`)
  - [x] chat_rooms, chat_messages, chat_participants
  - [x] conferences, conference_participants
  - [x] kanban_boards, kanban_columns, kanban_cards, kanban_board_members
  - [x] sprints, sprint_items, sprint_retrospectives
  - [x] workload_allocations, capacity_settings
  - [x] performance_metrics, peer_reviews
  - [x] team_calendar_events, team_calendar_attendees
- [x] 1.2 ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° RLS Ð¿Ð¾Ð»Ð¸Ñ‚Ð¸Ðº (Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾ Ð² Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÑŽ)
- [x] 1.3 Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐµÑ€Ð²Ð¸ÑÐ½Ñ‹Ñ… Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹ `lib/team/`
  - [x] `types.ts` - Ñ‚Ð¸Ð¿Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
  - [x] `kanban-service.ts` - Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ ÐºÐ°Ð½Ð±Ð°Ð½-Ð´Ð¾ÑÐ¾Ðº
  - [x] `conference-service.ts` - Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ ÐºÐ¾Ð½Ñ„ÐµÑ€ÐµÐ½Ñ†Ð¸Ð¹
- [x] 1.4 Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿ÑƒÐ½ÐºÑ‚Ð° Ð¼ÐµÐ½ÑŽ "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð½Ð°Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð°" (`components/tenders/tenders-sidebar.tsx`)
- [x] 1.5 Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ layout Ð´Ð»Ñ `/tenders/team/*`

### Ð­Ñ‚Ð°Ð¿ 2: ÐšÐ°Ð½Ð±Ð°Ð½-Ð´Ð¾ÑÐºÐ¸ âœ…

- [x] 2.1 Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° ÑÐ¿Ð¸ÑÐºÐ° Ð´Ð¾ÑÐ¾Ðº `/tenders/team/boards`
- [x] 2.2 Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð½Ð¾Ð²Ð¾Ð¹ Ð´Ð¾ÑÐºÐ¸ (Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÐ½Ð¾)
- [x] 2.3 Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð²Ð¸Ð´ Ð´Ð¾ÑÐºÐ¸ `/tenders/team/boards/[id]`
- [x] 2.4 ÐšÐ¾Ð»Ð¾Ð½ÐºÐ¸ Ñ drag-and-drop (@dnd-kit)
- [x] 2.5 ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð·Ð°Ð´Ð°Ñ‡ Ñ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼
- [x] 2.6 ÐŸÑ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ð¸Ðµ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¾Ð² Ð½Ð° Ð´Ð¾ÑÐºÑƒ (Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸)
- [x] 2.7 API endpoints Ð´Ð»Ñ CRUD ÐºÐ¾Ð»Ð¾Ð½Ð¾Ðº Ð¸ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐµÐº
- [x] 2.8 Ð¡Ð²ÑÐ·ÑŒ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐµÐº Ñ Ñ‚ÐµÐ½Ð´ÐµÑ€Ð°Ð¼Ð¸

### Ð­Ñ‚Ð°Ð¿ 3: Ð§Ð°Ñ‚ âœ…

- [x] 3.1 Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ñ‡Ð°Ñ‚Ð° `/tenders/team/chat`
- [x] 3.2 Ð¡Ð¿Ð¸ÑÐ¾Ðº ÐºÐ¾Ð¼Ð½Ð°Ñ‚ (Ð¿Ð¾ Ñ‚ÐµÐ½Ð´ÐµÑ€Ð°Ð¼, ÐºÐ¾Ð¼Ð°Ð½Ð´Ð½Ñ‹Ðµ, Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ)
- [x] 3.3 ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ° ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹
- [x] 3.4 Realtime Ñ‡ÐµÑ€ÐµÐ· Supabase
- [x] 3.5 Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð½Ð¾Ð²Ñ‹Ñ… ÐºÐ¾Ð¼Ð½Ð°Ñ‚
- [x] 3.6 Ð’Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ðº ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸ÑÐ¼
- [x] 3.7 Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ñ‹ Ð½ÐµÐ¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ñ…

### Ð­Ñ‚Ð°Ð¿ 4: Ð¡Ð¿Ñ€Ð¸Ð½Ñ‚Ñ‹ âœ…

- [x] 4.1 Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° ÑÐ¿Ñ€Ð¸Ð½Ñ‚Ð¾Ð² `/tenders/team/sprints`
- [x] 4.2 Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐ¿Ñ€Ð¸Ð½Ñ‚Ð° Ñ Ð´Ð°Ñ‚Ð°Ð¼Ð¸ Ð¸ Ñ†ÐµÐ»ÑŒÑŽ
- [x] 4.3 Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑÐ¾Ð¼ ÑÐ¿Ñ€Ð¸Ð½Ñ‚Ð°
- [x] 4.4 ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸ ÑÐ¿Ñ€Ð¸Ð½Ñ‚Ð¾Ð² Ñ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑÐ¾Ð¼
- [x] 4.5 Ð ÐµÐ¹Ñ‚Ð¸Ð½Ð³ Ð¿Ð¾ Ð´Ð½ÑÐ¼ Ð´Ð¾ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ
- [x] 4.6 Burndown chart
- [x] 4.7 Ð ÐµÑ‚Ñ€Ð¾ÑÐ¿ÐµÐºÑ‚Ð¸Ð²Ð°

### Ð­Ñ‚Ð°Ð¿ 5: Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¾Ð² âœ…

- [x] 5.1 Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ `/tenders/team/workload`
- [x] 5.2 ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¾Ð² Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¾Ð¹
- [x] 5.3 ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ°Ð¼
- [x] 5.4 ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¸ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°
- [x] 5.5 Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ñ‹ Ð¿ÐµÑ€ÐµÐ³Ñ€ÑƒÐ·ÐºÐ¸/Ð½ÐµÐ´Ð¾Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸
- [x] 5.6 Gantt-Ð´Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ð°

### Ð­Ñ‚Ð°Ð¿ 6: Ð’Ð¸Ð´ÐµÐ¾ÐºÐ¾Ð½Ñ„ÐµÑ€ÐµÐ½Ñ†Ð¸Ð¸ (Jitsi) âœ…

- [x] 6.1 Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° ÐºÐ¾Ð½Ñ„ÐµÑ€ÐµÐ½Ñ†Ð¸Ð¹ `/tenders/team/conferences`
- [x] 6.2 Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð²ÑÑ‚Ñ€ÐµÑ‡Ð¸ (Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ meet.jit.si)
- [x] 6.3 Ð’ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ñ‹Ð¹ Jitsi iframe
- [x] 6.4 ÐŸÑ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ð¸Ðµ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²
- [x] 6.5 Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð²ÑÑ‚Ñ€ÐµÑ‡
- [x] API endpoints Ð´Ð»Ñ CRUD

### Ð­Ñ‚Ð°Ð¿ 7: ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ Ð·Ð°Ð½ÑÑ‚Ð¾ÑÑ‚Ð¸ âœ…

- [x] 7.1 Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° ÐºÐ°Ð»ÐµÐ½Ð´Ð°Ñ€Ñ `/tenders/team/calendar`
- [x] 7.2 ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ñ ÑÐµÑ‚ÐºÐ¾Ð¹ Ð½Ð° Ð¼ÐµÑÑÑ†
- [x] 7.3 Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ (Ð²ÑÑ‚Ñ€ÐµÑ‡Ð¸, Ð´ÐµÐ´Ð»Ð°Ð¹Ð½Ñ‹, Ð¾Ñ‚Ð¿ÑƒÑÐºÐ°, Ð±Ð¾Ð»ÑŒÐ½Ð¸Ñ‡Ð½Ñ‹Ðµ)
- [x] 7.4 ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹
- [x] 7.5 Ð¢Ð¸Ð¿Ñ‹ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ñ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ð¾Ð¹ ÐºÐ¾Ð´Ð¸Ñ€Ð¾Ð²ÐºÐ¾Ð¹
- [x] 7.6 Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¾Ð¹ Ð¸ ÑÐ¿Ñ€Ð¸Ð½Ñ‚Ð°Ð¼Ð¸

### Ð­Ñ‚Ð°Ð¿ 8: Ð ÐµÐ¹Ñ‚Ð¸Ð½Ð³ Ð¸ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ° âœ…

- [x] 8.1 Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ¸ `/tenders/team/analytics`
- [x] 8.2 Ð”Ð°ÑˆÐ±Ð¾Ñ€Ð´ Ñ Ð¾Ð±Ñ‰ÐµÐ¹ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¾Ð¹
- [x] 8.3 Ð ÐµÐ¹Ñ‚Ð¸Ð½Ð³ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¾Ð² (leaderboard)
- [x] 8.4 Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð° Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸
- [x] 8.5 ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸ Ñ‚Ð¾Ð¿-3 ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¾Ð²
- [x] 8.6 Peer-review Ð¿Ð¾ÑÐ»Ðµ ÑÐ¿Ñ€Ð¸Ð½Ñ‚Ð¾Ð²

---

## ðŸ—„ï¸ Ð¡Ñ…ÐµÐ¼Ð° Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…

### Ð§Ð°Ñ‚

```sql
-- ÐšÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹ Ñ‡Ð°Ñ‚Ð¾Ð²
CREATE TABLE chat_rooms (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  company_id UUID NOT NULL REFERENCES companies(id) ON DELETE CASCADE,
  tender_id UUID REFERENCES tenders(id) ON DELETE SET NULL,
  name TEXT NOT NULL,
  type TEXT NOT NULL CHECK (type IN ('tender', 'team', 'private')),
  created_by UUID NOT NULL REFERENCES auth.users(id),
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ
CREATE TABLE chat_messages (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  room_id UUID NOT NULL REFERENCES chat_rooms(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES auth.users(id),
  content TEXT NOT NULL,
  attachments JSONB DEFAULT '[]',
  reply_to UUID REFERENCES chat_messages(id) ON DELETE SET NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¸ ÐºÐ¾Ð¼Ð½Ð°Ñ‚
CREATE TABLE chat_participants (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  room_id UUID NOT NULL REFERENCES chat_rooms(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES auth.users(id),
  role TEXT DEFAULT 'member' CHECK (role IN ('admin', 'member')),
  joined_at TIMESTAMPTZ DEFAULT NOW(),
  last_read_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(room_id, user_id)
);
```

### Ð’Ð¸Ð´ÐµÐ¾ÐºÐ¾Ð½Ñ„ÐµÑ€ÐµÐ½Ñ†Ð¸Ð¸ (Jitsi)

```sql
-- ÐšÐ¾Ð½Ñ„ÐµÑ€ÐµÐ½Ñ†Ð¸Ð¸
CREATE TABLE conferences (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  company_id UUID NOT NULL REFERENCES companies(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  description TEXT,
  host_id UUID NOT NULL REFERENCES auth.users(id),
  jitsi_room_name TEXT NOT NULL UNIQUE,
  scheduled_at TIMESTAMPTZ,
  duration_minutes INTEGER DEFAULT 60,
  status TEXT DEFAULT 'scheduled' CHECK (status IN ('scheduled', 'active', 'ended')),
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¸ ÐºÐ¾Ð½Ñ„ÐµÑ€ÐµÐ½Ñ†Ð¸Ð¹
CREATE TABLE conference_participants (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  conference_id UUID NOT NULL REFERENCES conferences(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES auth.users(id),
  invited_at TIMESTAMPTZ DEFAULT NOW(),
  joined_at TIMESTAMPTZ,
  left_at TIMESTAMPTZ,
  UNIQUE(conference_id, user_id)
);
```

### ÐšÐ°Ð½Ð±Ð°Ð½-Ð´Ð¾ÑÐºÐ¸

```sql
-- Ð”Ð¾ÑÐºÐ¸
CREATE TABLE kanban_boards (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  company_id UUID NOT NULL REFERENCES companies(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  description TEXT,
  is_template BOOLEAN DEFAULT FALSE,
  created_by UUID NOT NULL REFERENCES auth.users(id),
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ÐšÐ¾Ð»Ð¾Ð½ÐºÐ¸
CREATE TABLE kanban_columns (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  board_id UUID NOT NULL REFERENCES kanban_boards(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  position INTEGER NOT NULL,
  color TEXT DEFAULT '#6366f1',
  wip_limit INTEGER,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸
CREATE TABLE kanban_cards (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  column_id UUID NOT NULL REFERENCES kanban_columns(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  description TEXT,
  priority TEXT DEFAULT 'normal' CHECK (priority IN ('low', 'normal', 'high', 'urgent')),
  assignee_ids UUID[] DEFAULT '{}',
  due_date DATE,
  labels TEXT[] DEFAULT '{}',
  attachments JSONB DEFAULT '[]',
  tender_id UUID REFERENCES tenders(id) ON DELETE SET NULL,
  task_id UUID REFERENCES tasks(id) ON DELETE SET NULL,
  position INTEGER NOT NULL,
  created_by UUID NOT NULL REFERENCES auth.users(id),
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¸ Ð´Ð¾ÑÐ¾Ðº
CREATE TABLE kanban_board_members (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  board_id UUID NOT NULL REFERENCES kanban_boards(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES auth.users(id),
  role TEXT DEFAULT 'editor' CHECK (role IN ('owner', 'editor', 'viewer')),
  invited_by UUID REFERENCES auth.users(id),
  invited_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(board_id, user_id)
);
```

### Ð¡Ð¿Ñ€Ð¸Ð½Ñ‚Ñ‹

```sql
-- Ð¡Ð¿Ñ€Ð¸Ð½Ñ‚Ñ‹
CREATE TABLE sprints (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  company_id UUID NOT NULL REFERENCES companies(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  goal TEXT,
  start_date DATE NOT NULL,
  end_date DATE NOT NULL,
  status TEXT DEFAULT 'planning' CHECK (status IN ('planning', 'active', 'review', 'completed')),
  created_by UUID NOT NULL REFERENCES auth.users(id),
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ ÑÐ¿Ñ€Ð¸Ð½Ñ‚Ð°
CREATE TABLE sprint_items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  sprint_id UUID NOT NULL REFERENCES sprints(id) ON DELETE CASCADE,
  item_type TEXT NOT NULL CHECK (item_type IN ('task', 'tender', 'card')),
  item_id UUID NOT NULL,
  story_points INTEGER,
  priority INTEGER DEFAULT 0,
  status TEXT DEFAULT 'todo' CHECK (status IN ('todo', 'in_progress', 'review', 'done')),
  assigned_to UUID REFERENCES auth.users(id),
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Ð ÐµÑ‚Ñ€Ð¾ÑÐ¿ÐµÐºÑ‚Ð¸Ð²Ñ‹
CREATE TABLE sprint_retrospectives (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  sprint_id UUID NOT NULL REFERENCES sprints(id) ON DELETE CASCADE,
  what_went_well TEXT[] DEFAULT '{}',
  what_to_improve TEXT[] DEFAULT '{}',
  action_items JSONB DEFAULT '[]',
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(sprint_id)
);
```

### Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¾Ð²

```sql
-- Ð Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸
CREATE TABLE workload_allocations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  company_id UUID NOT NULL REFERENCES companies(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES auth.users(id),
  tender_id UUID REFERENCES tenders(id) ON DELETE SET NULL,
  task_id UUID REFERENCES tasks(id) ON DELETE SET NULL,
  title TEXT NOT NULL,
  allocated_hours INTEGER NOT NULL,
  start_date DATE NOT NULL,
  end_date DATE NOT NULL,
  priority TEXT DEFAULT 'normal' CHECK (priority IN ('low', 'normal', 'high', 'urgent')),
  status TEXT DEFAULT 'assigned' CHECK (status IN ('assigned', 'in_progress', 'completed', 'cancelled')),
  progress_percent INTEGER DEFAULT 0 CHECK (progress_percent >= 0 AND progress_percent <= 100),
  notes TEXT,
  created_by UUID NOT NULL REFERENCES auth.users(id),
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¼Ð¾Ñ‰Ð½Ð¾ÑÑ‚Ð¸
CREATE TABLE capacity_settings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  company_id UUID NOT NULL REFERENCES companies(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES auth.users(id),
  weekly_hours INTEGER DEFAULT 40,
  vacation_days JSONB DEFAULT '[]',
  sick_days JSONB DEFAULT '[]',
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(company_id, user_id)
);
```

### Ð ÐµÐ¹Ñ‚Ð¸Ð½Ð³

```sql
-- ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸
CREATE TABLE performance_metrics (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  company_id UUID NOT NULL REFERENCES companies(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES auth.users(id),
  period_type TEXT NOT NULL CHECK (period_type IN ('month', 'quarter', 'year')),
  period_start DATE NOT NULL,
  tenders_won INTEGER DEFAULT 0,
  tenders_total INTEGER DEFAULT 0,
  tasks_completed INTEGER DEFAULT 0,
  avg_completion_days NUMERIC(5,2),
  quality_score NUMERIC(3,2),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(company_id, user_id, period_type, period_start)
);

-- Peer-review
CREATE TABLE peer_reviews (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  company_id UUID NOT NULL REFERENCES companies(id) ON DELETE CASCADE,
  reviewer_id UUID NOT NULL REFERENCES auth.users(id),
  reviewee_id UUID NOT NULL REFERENCES auth.users(id),
  sprint_id UUID REFERENCES sprints(id) ON DELETE SET NULL,
  rating INTEGER NOT NULL CHECK (rating >= 1 AND rating <= 5),
  feedback TEXT,
  skills JSONB DEFAULT '[]',
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

## ðŸ” ÐŸÑ€Ð°Ð²Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° (RLS)

| Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° | ÐÐ´Ð¼Ð¸Ð½ | Ð¡Ð¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸Ðº |
|---------|-------|-----------|
| chat_rooms | CRUD | R (ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸Ðº) |
| chat_messages | CRUD | CR (Ð² ÑÐ²Ð¾Ð¸Ñ… ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ð°Ñ…) |
| conferences | CRUD | R (Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÑ‘Ð½Ð½Ñ‹Ð¹) |
| kanban_boards | CRUD | R (ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸Ðº) |
| kanban_cards | CRUD | CRU (Ð½Ð° ÑÐ²Ð¾Ð¸Ñ… Ð´Ð¾ÑÐºÐ°Ñ…) |
| sprints | CRUD | R |
| sprint_items | CRUD | U (ÑÐ²Ð¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸) |
| workload_allocations | CRUD | R (ÑÐ²Ð¾Ð¸) |

---

## ðŸ“¦ Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸

```bash
# Ð£Ð¶Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹
# - @dnd-kit/core, @dnd-kit/sortable (Ð´Ð»Ñ drag-and-drop)
# - react-big-calendar Ð¸Ð»Ð¸ date-fns (Ð´Ð»Ñ ÐºÐ°Ð»ÐµÐ½Ð´Ð°Ñ€Ñ)

# Jitsi - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ meet.jit.si (Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ð¹ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€)
# Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· iframe + Jitsi External API
```

---

## ðŸ”— ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÑÑÑ‹Ð»ÐºÐ¸

- [Jitsi Meet External API](https://jitsi.github.io/handbook/docs/dev-guide/dev-guide-iframe)
- [Supabase Realtime](https://supabase.com/docs/guides/realtime)
- [dnd-kit](https://dndkit.com/)

---

## ðŸ“ Ð—Ð°Ð¼ÐµÑ‚ÐºÐ¸ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ°

### Ð¡ÐµÑÑÐ¸Ñ 12.12.2024

- âœ… Ð¡Ð¾Ð·Ð´Ð°Ð½Ð° Ð¿Ð¾Ð»Ð½Ð°Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ Ð‘Ð” Ñ 20+ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð°Ð¼Ð¸ Ð¸ RLS Ð¿Ð¾Ð»Ð¸Ñ‚Ð¸ÐºÐ°Ð¼Ð¸
- âœ… Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð±Ð»Ð¾Ðº "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð½Ð°Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð°" Ð² Ð¼ÐµÐ½ÑŽ Ñ‚ÐµÐ½Ð´ÐµÑ€Ð¾Ð²
- âœ… Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ñ‹ Ð²Ð¸Ð´ÐµÐ¾ÐºÐ¾Ð½Ñ„ÐµÑ€ÐµÐ½Ñ†Ð¸Ð¸ Ñ‡ÐµÑ€ÐµÐ· Jitsi Meet (iframe Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ)
- âœ… Ð¡Ð¾Ð·Ð´Ð°Ð½Ð° Ð±Ð°Ð·Ð¾Ð²Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° ÐºÐ°Ð½Ð±Ð°Ð½-Ð´Ð¾ÑÐ¾Ðº Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸ÐµÐ¼ Ð¸ Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ð¸ÐµÐ¼ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¾Ð²
- âœ… Ð¡Ð¾Ð·Ð´Ð°Ð½Ñ‹ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹-Ð·Ð°Ð³Ð»ÑƒÑˆÐºÐ¸ Ð´Ð»Ñ Ñ‡Ð°Ñ‚Ð°, ÑÐ¿Ñ€Ð¸Ð½Ñ‚Ð¾Ð², Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸ ÐºÐ°Ð»ÐµÐ½Ð´Ð°Ñ€Ñ

**Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÑˆÐ°Ð³Ð¸:**

1. ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÑŽ Ðº Ð‘Ð” Supabase
2. Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð²Ð¸Ð´ ÐºÐ°Ð½Ð±Ð°Ð½-Ð´Ð¾ÑÐºÐ¸ Ñ drag-and-drop
3. Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ realtime Ñ‡Ð°Ñ‚
4. Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ¿Ñ€Ð¸Ð½Ñ‚Ñ‹ Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÑƒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

---

**ÐŸÐ¾ÑÐ»ÐµÐ´Ð½ÐµÐµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ:** 12.12.2024
