# üí∞ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç—ã: –†—É–±–ª–∏ ‚Üî –ö–æ–ø–µ–π–∫–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—É–º–º

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase)
**–§–æ—Ä–º–∞—Ç:** –ö–æ–ø–µ–π–∫–∏ (BIGINT)
- `nmck` - –ù–ú–¶–ö –≤ –∫–æ–ø–µ–π–∫–∞—Ö
- `our_price` - –ù–∞—à–∞ —Ü–µ–Ω–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö
- `contract_price` - –¶–µ–Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö
- `application_security` - –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ –≤ –∫–æ–ø–µ–π–∫–∞—Ö
- `contract_security` - –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ—á–Ω–æ—Å—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏–π, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è

### API –ï–ò–° (–ú–æ–∫-–¥–∞–Ω–Ω—ã–µ)
**–§–æ—Ä–º–∞—Ç:** –†—É–±–ª–∏ (Number —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π)
- `nmck: 5645255.27` - –ù–ú–¶–ö –≤ —Ä—É–±–ª—è—Ö
- `bid_security: 625000.00` - –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ –≤ —Ä—É–±–ª—è—Ö
- `contract_security: 1250000.00` - –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –≤ —Ä—É–±–ª—è—Ö

**–ü—Ä–∏—á–∏–Ω–∞:** –£–¥–æ–±—Å—Ç–≤–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ï–ò–°

### UI (–§–æ—Ä–º—ã –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
**–§–æ—Ä–º–∞—Ç:** –†—É–±–ª–∏ (Number)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç: `5 645 255.27`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç: `5 645 255.27 ‚ÇΩ`

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏–≤—ã—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è

### –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ (UI ‚Üí –ë–î)
```typescript
// –í TenderFormModal.onSubmit
const payload = {
  nmck: Math.round(data.nmck * 100), // —Ä—É–±–ª–∏ ‚Üí –∫–æ–ø–µ–π–∫–∏
  our_price: data.our_price ? Math.round(data.our_price * 100) : undefined,
  // ...
};
```

### –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (–ë–î ‚Üí UI)
```typescript
// –í TenderFormModal.useEffect (—Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
reset({
  nmck: tender.nmck / 100, // –∫–æ–ø–µ–π–∫–∏ ‚Üí —Ä—É–±–ª–∏
  our_price: tender.our_price ? tender.our_price / 100 : undefined,
  // ...
});
```

### –ü—Ä–∏ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ (–ï–ò–° ‚Üí UI)
```typescript
// –í TenderFormModal.useEffect (–¥–∞–Ω–Ω—ã–µ –∏–∑ –ï–ò–°)
reset({
  nmck: eisData.nmck, // —É–∂–µ –≤ —Ä—É–±–ª—è—Ö, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞
  application_security: eisData.bid_security,
  // ...
});
```

## –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä–∞ –∏–∑ –ï–ò–°
1. **–ï–ò–° API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `nmck: 5645255.27` (—Ä—É–±–ª–∏)
2. **–§–æ—Ä–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:** `5645255.27` (—Ä—É–±–ª–∏)
3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å:** `5645255.27` ‚Üí `5600000.00`
4. **–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è:** `5600000.00 * 100 = 560000000` (–∫–æ–ø–µ–π–∫–∏)
5. **–í –ë–î —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:** `nmck: 560000000` (–∫–æ–ø–µ–π–∫–∏)

### –ü—Ä–∏–º–µ—Ä 2: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–µ–Ω–¥–µ—Ä–∞
1. **–ò–∑ –ë–î –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:** `nmck: 560000000` (–∫–æ–ø–µ–π–∫–∏)
2. **–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –¥–ª—è —Ñ–æ—Ä–º—ã:** `560000000 / 100 = 5600000.00` (—Ä—É–±–ª–∏)
3. **–§–æ—Ä–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:** `5600000.00` (—Ä—É–±–ª–∏)
4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç:** `5600000.00` ‚Üí `5500000.00`
5. **–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è:** `5500000.00 * 100 = 550000000` (–∫–æ–ø–µ–π–∫–∏)
6. **–í –ë–î –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:** `nmck: 550000000` (–∫–æ–ø–µ–π–∫–∏)

## –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Math.round()` –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∫–æ–ø–µ–π–∫–∏
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- –í –º–æ–∫-–¥–∞–Ω–Ω—ã—Ö –ï–ò–° –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É–±–ª–∏ —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ –∫–æ–ø–µ–µ–∫

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Ä—É–±–ª–∏ –≤ –ë–î (–ø–æ—Ç–µ—Ä—è —Ç–æ—á–Ω–æ—Å—Ç–∏)
- –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏/–∑–∞–≥—Ä—É–∑–∫–µ
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ü–µ–ª—ã–µ —Ä—É–±–ª–∏ –≤ –ï–ò–° API (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å –∫–æ–ø–µ–π–∫–∞–º–∏)

## –§–∞–π–ª—ã —Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `components/tenders/tender-form-modal.tsx` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã

### –ú–æ–∫-–¥–∞–Ω–Ω—ã–µ
- `lib/tenders/eis-mock-data.ts` - –¥–∞–Ω–Ω—ã–µ –≤ —Ä—É–±–ª—è—Ö

### API
- `app/api/tenders/route.ts` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ–ø–µ–π–∫–∞–º–∏ (–ë–î)
- `app/api/tenders/search-eis/route.ts` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä—É–±–ª–∏ (–ï–ò–°)

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏**
   ```typescript
   // lib/utils/currency.ts
   export const rublesToKopecks = (rubles: number): number => Math.round(rubles * 100);
   export const kopecksToRubles = (kopecks: number): number => kopecks / 100;
   ```

2. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è**
   ```typescript
   export const formatCurrency = (kopecks: number): string => {
     const rubles = kopecksToRubles(kopecks);
     return new Intl.NumberFormat('ru-RU', {
       style: 'currency',
       currency: 'RUB',
     }).format(rubles);
   };
   ```

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–∞

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã
```typescript
describe('Currency conversion', () => {
  it('should convert rubles to kopecks', () => {
    expect(Math.round(5645255.27 * 100)).toBe(564525527);
  });

  it('should convert kopecks to rubles', () => {
    expect(564525527 / 100).toBe(5645255.27);
  });

  it('should handle zero', () => {
    expect(Math.round(0 * 100)).toBe(0);
    expect(0 / 100).toBe(0);
  });
});
```

### E2E —Ç–µ—Å—Ç—ã
```typescript
test('should save tender with correct currency conversion', async ({ page }) => {
  // –í–≤–æ–¥–∏–º –≤ —Ä—É–±–ª—è—Ö
  await page.fill('input[name="nmck"]', '5645255.27');
  await page.click('button[type="submit"]');
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤ –ë–î —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å –≤ –∫–æ–ø–µ–π–∫–∞—Ö
  const tender = await getTenderFromDB();
  expect(tender.nmck).toBe(564525527);
});
```
