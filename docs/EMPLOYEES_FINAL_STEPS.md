# ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–µ —à–∞–≥–∏: –ú–æ–¥—É–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î –≤ Supabase

**–®–∞–≥ 1:** –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard
```
https://supabase.com/dashboard/project/YOUR_PROJECT_ID
```

**–®–∞–≥ 2:** –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ SQL Editor
- –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ "SQL Editor"
- –ù–∞–∂–º–∏—Ç–µ "New query"

**–®–∞–≥ 3:** –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
- –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `db/migrations/0103_create_employees_system.sql`
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å SQL –∫–æ–¥

**–®–∞–≥ 4:** –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
- –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –≤ SQL Editor
- –ù–∞–∂–º–∏—Ç–µ "Run" (–∏–ª–∏ Ctrl+Enter)
- –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è "Success"

**–ß—Ç–æ —Å–æ–∑–¥–∞—Å—Ç—Å—è:**
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `employees` —Å –ø–æ–ª—è–º–∏ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `employee_history` –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `employee_skills` –¥–ª—è –Ω–∞–≤—ã–∫–æ–≤
- ‚úÖ ENUM —Ç–∏–ø—ã –¥–ª—è —Ä–æ–ª–µ–π –∏ —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `get_employees_stats()`

### 2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –º–æ–¥—É–ª—è

**–®–∞–≥ 1:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä
```bash
npm run dev
```

**–®–∞–≥ 2:** –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
```
http://localhost:3000/tenders/employees
```

**–®–∞–≥ 3:** –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- –ù–∞–∂–º–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"
- –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
  - –§–ò–û: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –°–∏—Å—Ç–µ–º—ã
  - Email: admin@company.com
  - –†–æ–ª—å: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Å–æ–∑–¥–∞–π—Ç–µ —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å
- –ù–∞–∂–º–∏—Ç–µ "‚úì –°–æ–∑–¥–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"

**–®–∞–≥ 4:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å
- –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∏–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ
- –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Å–µ–∫—Ü–∏–∏ (–∫–æ–Ω—Ç–∞–∫—Ç—ã, —Ä–∞–±–æ—á–∏–µ –¥–∞–Ω–Ω—ã–µ, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)

### 3. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–Ω–¥–µ—Ä–∞–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### 3.1. –û–±–Ω–æ–≤–∏—Ç—å —Ñ–æ—Ä–º—É —Ç–µ–Ω–¥–µ—Ä–∞

–í —Ñ–∞–π–ª–µ `components/tenders/tender-form-modal.tsx` –¥–æ–±–∞–≤—å—Ç–µ:

```typescript
import { useState, useEffect } from 'react';
import { getManagersForTender } from '@/lib/employees/client-utils';

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ TenderFormModal:
const [managers, setManagers] = useState<Array<{id: string; name: string}>>([]);

useEffect(() => {
  const loadManagers = async () => {
    const data = await getManagersForTender(companyId);
    setManagers(data);
  };
  loadManagers();
}, [companyId]);
```

–ó–∞–º–µ–Ω–∏—Ç–µ hardcoded —Å–ø–∏—Å–æ–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –Ω–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π:

```typescript
// –ë—ã–ª–æ:
{managers.map((manager) => (
  <option key={manager.id} value={manager.id}>
    {manager.full_name}
  </option>
))}

// –°—Ç–∞–ª–æ:
{managers.map((manager) => (
  <option key={manager.id} value={manager.id}>
    {manager.name}
  </option>
))}
```

#### 3.2. –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–º—É

–í —Ñ–∞–π–ª–µ `app/(protected)/tenders/list/tenders-list-client.tsx`:

```typescript
// –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
const [managers, setManagers] = useState([]);

// –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
useEffect(() => {
  const loadManagers = async () => {
    const data = await getManagersForTender(companyId);
    setManagers(data);
  };
  loadManagers();
}, [companyId]);

// –î–æ–±–∞–≤–∏—Ç—å select –≤ —Ñ–∏–ª—å—Ç—Ä—ã:
<select
  value={filters.manager_id || ''}
  onChange={(e) => setFilters({ ...filters, manager_id: e.target.value })}
>
  <option value="">–í—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã</option>
  {managers.map((manager) => (
    <option key={manager.id} value={manager.id}>
      {manager.name}
    </option>
  ))}
</select>
```

#### 3.3. –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `lib/employees/stats-service.ts`:

```typescript
'use server';

import { createRSCClient } from '@/lib/supabase/server';

const createClient = createRSCClient;

export async function getEmployeeStats(employeeId: string) {
  const supabase = await createClient();
  
  const { data: tenders } = await supabase
    .from('tenders')
    .select('status')
    .or(`manager_id.eq.${employeeId},specialist_id.eq.${employeeId}`)
    .is('deleted_at', null);
  
  if (!tenders) {
    return {
      total_tenders: 0,
      won_tenders: 0,
      lost_tenders: 0,
      active_tenders: 0,
      success_rate: 0,
    };
  }
  
  const total = tenders.length;
  const won = tenders.filter(t => t.status === 'won').length;
  const lost = tenders.filter(t => t.status === 'lost').length;
  const active = tenders.filter(t => t.status === 'active').length;
  
  return {
    total_tenders: total,
    won_tenders: won,
    lost_tenders: lost,
    active_tenders: active,
    success_rate: total > 0 ? Math.round((won / (won + lost)) * 100) : 0,
  };
}
```

–°–æ–∑–¥–∞–π—Ç–µ API endpoint `app/api/employees/[id]/stats/route.ts`:

```typescript
import { NextRequest, NextResponse } from 'next/server';
import { getEmployeeStats } from '@/lib/employees/stats-service';

export async function GET(
  request: NextRequest,
  { params }: { params: { id: string } }
) {
  try {
    const stats = await getEmployeeStats(params.id);
    return NextResponse.json(stats);
  } catch (error) {
    console.error('Error fetching employee stats:', error);
    return NextResponse.json(
      { error: '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏' },
      { status: 500 }
    );
  }
}
```

–û–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

## üìã –ß–µ–∫-–ª–∏—Å—Ç

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏:
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –ë–î –≤ Supabase
- [ ] –ó–∞–ø—É—â–µ–Ω dev —Å–µ—Ä–≤–µ—Ä
- [ ] –û—Ç–∫—Ä—ã—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/tenders/employees`
- [ ] –°–æ–∑–¥–∞–Ω –ø–µ—Ä–≤—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —à–∞–≥–∏:
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º–∞ —Ç–µ–Ω–¥–µ—Ä–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- [ ] –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä —Ç–µ–Ω–¥–µ—Ä–æ–≤ –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–º—É
- [ ] –°–æ–∑–¥–∞–Ω API endpoint —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–æ—Ñ–∏–ª—å —Å —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —É –≤–∞—Å –±—É–¥–µ—Ç:

‚úÖ **–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤:**
- –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –ü—Ä–æ—Ñ–∏–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- –°–æ–∑–¥–∞–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É
- –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ RLS

‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–Ω–¥–µ—Ä–∞–º–∏:**
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –Ω–∞ —Ç–µ–Ω–¥–µ—Ä—ã
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ–Ω–¥–µ—Ä–æ–≤ –ø–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–º—É
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `EMPLOYEES_MODULE.md` - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è
- `EMPLOYEES_COMPLETE.md` - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- `EMPLOYEES_INTEGRATION_GUIDE.md` - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `EMPLOYEES_FINAL_STEPS.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª (—Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —à–∞–≥–∏)

## üÜò Troubleshooting

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** "relation already exists"
**–†–µ—à–µ–Ω–∏–µ:** –¢–∞–±–ª–∏—Ü–∞ —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞, –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —à–∞–≥

**–ü—Ä–æ–±–ª–µ–º–∞:** "permission denied"
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –≤ Supabase

### –û—à–∏–±–∫–∞ 404 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ dev —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å: `/tenders/employees`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä

### –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ø–∏—Å–æ–∫ –ø—É—Å—Ç –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `company_id` –≤ –∫–æ–¥–µ (–¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –≤–∞—à–∏–º)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏"
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (–§–ò–û, Email, –†–æ–ª—å)

**–ü—Ä–æ–±–ª–µ–º–∞:** "Email already exists"
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π email –∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

## üöÄ –ì–æ—Ç–æ–≤–æ!

–ú–æ–¥—É–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéä

–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –î–æ–±–∞–≤—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏
2. –ù–∞–∑–Ω–∞—á–∞–π—Ç–µ –∏—Ö –Ω–∞ —Ç–µ–Ω–¥–µ—Ä—ã
3. –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
