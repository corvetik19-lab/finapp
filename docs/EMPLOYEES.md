# üë• –ú–æ–¥—É–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚Äî –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

> **–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready  
> **–í–µ—Ä—Å–∏—è:** 1.0.0

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –º–æ–¥—É–ª—è](#–æ–±–∑–æ—Ä-–º–æ–¥—É–ª—è)
2. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
3. [–†–æ–ª–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã](#—Ä–æ–ª–∏-–∏-—Å—Ç–∞—Ç—É—Å—ã)
4. [API Endpoints](#api-endpoints)
5. [–°—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#—Å—Ç—Ä–∞–Ω–∏—Ü—ã-–∏-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
6. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–Ω–¥–µ—Ä–∞–º–∏](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-—Ç–µ–Ω–¥–µ—Ä–∞–º–∏)
7. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
8. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
9. [Troubleshooting](#troubleshooting)

---

## –û–±–∑–æ—Ä –º–æ–¥—É–ª—è

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- ‚úÖ –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `employees` —Å –ø—Ä–æ—Ñ–∏–ª–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π `employee_history`
- ‚úÖ –ù–∞–≤—ã–∫–∏ `employee_skills`
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- ‚úÖ –ú–æ–¥–∞–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–Ω–¥–µ—Ä–∞–º–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
db/migrations/
  ‚îî‚îÄ‚îÄ 0103_create_employees_system.sql

lib/employees/
  ‚îú‚îÄ‚îÄ types.ts                    # –¢–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
  ‚îú‚îÄ‚îÄ validation.ts               # –°—Ö–µ–º—ã Zod
  ‚îú‚îÄ‚îÄ service.ts                  # –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π
  ‚îî‚îÄ‚îÄ client-utils.ts             # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞

app/api/employees/
  ‚îú‚îÄ‚îÄ route.ts                    # GET, POST
  ‚îî‚îÄ‚îÄ [id]/route.ts               # GET, PATCH, DELETE

app/(protected)/tenders/employees/
  ‚îú‚îÄ‚îÄ page.tsx                    # –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
  ‚îú‚îÄ‚îÄ employees-list-client.tsx   # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
  ‚îî‚îÄ‚îÄ [id]/
      ‚îú‚îÄ‚îÄ page.tsx                # –ü—Ä–æ—Ñ–∏–ª—å
      ‚îî‚îÄ‚îÄ employee-profile-client.tsx

components/employees/
  ‚îú‚îÄ‚îÄ employee-form-modal.tsx     # –ú–æ–¥–∞–ª–∫–∞
  ‚îî‚îÄ‚îÄ employee-form-modal.module.css
```

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ employees

**–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- `full_name` ‚Äî –§–ò–û
- `email` ‚Äî Email
- `phone` ‚Äî –¢–µ–ª–µ—Ñ–æ–Ω
- `telegram` ‚Äî Telegram
- `birth_date` ‚Äî –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
- `avatar_url` ‚Äî URL –∞–≤–∞—Ç–∞—Ä–∞

**–†–∞–±–æ—á–∏–µ –¥–∞–Ω–Ω—ã–µ:**
- `position` ‚Äî –î–æ–ª–∂–Ω–æ—Å—Ç—å
- `department` ‚Äî –û—Ç–¥–µ–ª
- `employee_number` ‚Äî –¢–∞–±–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä
- `hire_date` ‚Äî –î–∞—Ç–∞ –ø—Ä–∏–µ–º–∞
- `dismissal_date` ‚Äî –î–∞—Ç–∞ —É–≤–æ–ª—å–Ω–µ–Ω–∏—è

**–†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø:**
- `role` ‚Äî –†–æ–ª—å –≤ —Å–∏—Å—Ç–µ–º–µ
- `status` ‚Äî –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- `permissions` ‚Äî –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ (JSON)

**–ö–æ–Ω—Ç–∞–∫—Ç—ã:**
- `address` ‚Äî –ê–¥—Ä–µ—Å
- `emergency_contact` ‚Äî –ö–æ–Ω—Ç–∞–∫—Ç –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π —Å–≤—è–∑–∏
- `emergency_phone` ‚Äî –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π —Å–≤—è–∑–∏

**–†–∞–±–æ—á–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `salary_amount` ‚Äî –ó–∞—Ä–ø–ª–∞—Ç–∞ (–≤ –∫–æ–ø–µ–π–∫–∞—Ö)
- `work_schedule` ‚Äî –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã
- `notes` ‚Äî –ó–∞–º–µ—Ç–∫–∏

### –¢–∞–±–ª–∏—Ü–∞ employee_history

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:

- `action: 'created'` ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ
- `action: 'updated'` ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `action: 'role_changed'` ‚Äî –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏
- `action: 'status_changed'` ‚Äî –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

### –¢–∞–±–ª–∏—Ü–∞ employee_skills

–ù–∞–≤—ã–∫–∏ –∏ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.

---

## –†–æ–ª–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã

### –†–æ–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

| –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∞–≤–∞ |
|------|----------|-------|
| `admin` | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø |
| `manager` | –ú–µ–Ω–µ–¥–∂–µ—Ä | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä–∞–º–∏ |
| `tender_specialist` | –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç | –†–∞–±–æ—Ç–∞ —Å —Ç–µ–Ω–¥–µ—Ä–∞–º–∏ |
| `accountant` | –ë—É—Ö–≥–∞–ª—Ç–µ—Ä | –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∏–Ω–∞–Ω—Å–æ–≤ |
| `logistics` | –õ–æ–≥–∏—Å—Ç | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏—Å—Ç–∏–∫–æ–π |
| `viewer` | –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å | –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä |

### –°—Ç–∞—Ç—É—Å—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

| –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ | –¶–≤–µ—Ç |
|--------|----------|------|
| `active` | –ê–∫—Ç–∏–≤–Ω—ã–π | –ó–µ–ª—ë–Ω—ã–π #10b981 |
| `inactive` | –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π | –°–µ—Ä—ã–π #6b7280 |
| `vacation` | –í –æ—Ç–ø—É—Å–∫–µ | –°–∏–Ω–∏–π #3b82f6 |
| `dismissed` | –£–≤–æ–ª–µ–Ω | –ö—Ä–∞—Å–Ω—ã–π #ef4444 |

---

## API Endpoints

### GET /api/employees

–°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `company_id` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π
- `search` ‚Äî –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, email, —Ç–µ–ª–µ—Ñ–æ–Ω—É
- `role` ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ä–æ–ª–∏
- `status` ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `department` ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ –æ—Ç–¥–µ–ª—É
- `page` ‚Äî –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
- `limit` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)
- `stats=true` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### POST /api/employees

–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.

```json
{
  "company_id": "uuid",
  "full_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "email": "ivan@example.com",
  "phone": "+79001234567",
  "role": "manager",
  "position": "–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ —Ç–µ–Ω–¥–µ—Ä–∞–º",
  "department": "–¢–µ–Ω–¥–µ—Ä–Ω—ã–π –æ—Ç–¥–µ–ª",
  "create_user_account": true,
  "password": "secure_password"
}
```

### GET /api/employees/[id]

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø–æ ID.

### PATCH /api/employees/[id]

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.

### DELETE /api/employees/[id]

–ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `deleted_at`).

---

## –°—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

**URL:** `/tenders/employees`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –¢–∞–±–ª–∏—Ü–∞ —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∏–º–µ–Ω–∏, —Ä–æ–ª–∏, —Å—Ç–∞—Ç—É—Å—É
- –ê–≤–∞—Ç–∞—Ä—ã —Å –∏–Ω–∏—Ü–∏–∞–ª–∞–º–∏
- –¶–≤–µ—Ç–Ω—ã–µ badges –¥–ª—è —Ä–æ–ª–µ–π –∏ —Å—Ç–∞—Ç—É—Å–æ–≤
- –ö–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ú–æ–¥–∞–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–°–µ–∫—Ü–∏–∏:**

1. **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
   - –§–ò–û (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - Email (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - –¢–µ–ª–µ—Ñ–æ–Ω
   - Telegram
   - –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è

2. **–†–∞–±–æ—á–∏–µ –¥–∞–Ω–Ω—ã–µ:**
   - –î–æ–ª–∂–Ω–æ—Å—Ç—å
   - –û—Ç–¥–µ–ª
   - –†–æ–ª—å –≤ —Å–∏—Å—Ç–µ–º–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - –°—Ç–∞—Ç—É—Å
   - –î–∞—Ç–∞ –ø—Ä–∏–µ–º–∞

3. **–£—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å (–ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏):**
   - Checkbox "–°–æ–∑–¥–∞—Ç—å —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å"
   - –ü–æ–ª–µ –ø–∞—Ä–æ–ª—è (–º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤)

4. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
   - –ó–∞–º–µ—Ç–∫–∏
   - –ê–≤–∞—Ç–∞—Ä (placeholder)

**UI –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è (fadeIn + slideUp)
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–≤–æ–¥ –ø–∞—Ä–æ–ª—è

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è

**URL:** `/tenders/employees/[id]`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ
- –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –†–∞–±–æ—á–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Ç–µ–Ω–¥–µ—Ä—ã, –≤—ã–∏–≥—Ä—ã—à–∏)
- –ö–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–Ω–¥–µ—Ä–∞–º–∏

### –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è select

```typescript
import { 
  getManagersForTender, 
  getTenderSpecialists,
  getAllActiveEmployees 
} from '@/lib/employees/client-utils';

// –ü–æ–ª—É—á–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
const managers = await getManagersForTender(companyId);

// –ü–æ–ª—É—á–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
const specialists = await getTenderSpecialists(companyId);
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã —Ç–µ–Ω–¥–µ—Ä–∞

```typescript
// –í components/tenders/tender-form-modal.tsx
const [managers, setManagers] = useState([]);

useEffect(() => {
  const loadManagers = async () => {
    const data = await getManagersForTender(companyId);
    setManagers(data);
  };
  loadManagers();
}, [companyId]);

// –í JSX:
<select {...register('manager_id')}>
  <option value="">–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω</option>
  {managers.map((manager) => (
    <option key={manager.id} value={manager.id}>
      {manager.name}
    </option>
  ))}
</select>
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

```typescript
// lib/employees/service.ts
export async function getEmployeeStats(employeeId: string) {
  const supabase = await createClient();
  
  const { data: tenders } = await supabase
    .from('tenders')
    .select('status')
    .or(`manager_id.eq.${employeeId},specialist_id.eq.${employeeId}`)
    .is('deleted_at', null);
  
  const total = tenders?.length || 0;
  const won = tenders?.filter(t => t.status === 'won').length || 0;
  const lost = tenders?.filter(t => t.status === 'lost').length || 0;
  
  return {
    total_tenders: total,
    won_tenders: won,
    lost_tenders: lost,
    success_rate: total > 0 ? Math.round((won / (won + lost)) * 100) : 0,
  };
}
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### RLS –ø–æ–ª–∏—Ç–∏–∫–∏

```sql
-- SELECT: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å–≤–æ–µ–π –∫–æ–º–ø–∞–Ω–∏–∏
-- INSERT: —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã –∏ –º–µ–Ω–µ–¥–∂–µ—Ä—ã
-- UPDATE: —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã –∏ –º–µ–Ω–µ–¥–∂–µ—Ä—ã
-- DELETE: —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤

```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const currentEmployee = await getEmployeeByUserId(userId);
if (!['admin', 'manager'].includes(currentEmployee.role)) {
  throw new Error('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤');
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ —É—á—ë—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏

–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ "–°–æ–∑–¥–∞—Ç—å —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å":
1. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `supabase.auth.signUp()`
2. –°–æ–∑–¥–∞—ë—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ `auth.users`
3. `user_id` —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Å `employees`
4. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

```typescript
import { createEmployee } from '@/lib/employees/service';

const employee = await createEmployee({
  company_id: 'your-company-id',
  full_name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
  email: 'ivan@company.com',
  phone: '+79001234567',
  role: 'manager',
  position: '–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ —Ç–µ–Ω–¥–µ—Ä–∞–º',
  department: '–¢–µ–Ω–¥–µ—Ä–Ω—ã–π –æ—Ç–¥–µ–ª',
  create_user_account: true,
  password: 'SecurePass123!',
});
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞

```typescript
import { getEmployees } from '@/lib/employees/service';

const { data, count } = await getEmployees(
  companyId,
  { role: 'manager', status: 'active' },
  1,  // page
  50  // limit
);
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```typescript
import { getEmployeesStats } from '@/lib/employees/service';

const stats = await getEmployeesStats(companyId);
// {
//   total_count: 15,
//   active_count: 12,
//   inactive_count: 2,
//   on_vacation_count: 1,
//   by_role: { admin: 2, manager: 5, ... }
// }
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–∏

```typescript
await updateEmployee(employeeId, {
  role: 'manager',
  position: '–°—Ç–∞—Ä—à–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä',
});
```

---

## Troubleshooting

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

**"relation already exists"**
‚Üí –¢–∞–±–ª–∏—Ü–∞ —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞, –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ —à–∞–≥.

**"permission denied"**
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ –≤ Supabase.

### –û—à–∏–±–∫–∞ 404 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ dev —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
2. –ü—É—Ç—å: `/tenders/employees`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä

### –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `company_id`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

**"–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏"**
‚Üí –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –§–ò–û, Email, –†–æ–ª—å.

**"Email already exists"**
‚Üí –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π email.

---

## –ó–∞–ø—É—Å–∫

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

```bash
# –í Supabase SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
db/migrations/0103_create_employees_system.sql
```

### 2. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É

```
http://localhost:3000/tenders/employees
```

### 3. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

1. –ù–∞–∂–∞—Ç—å "‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
3. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Å–æ–∑–¥–∞—Ç—å —É—á—ë—Ç–Ω—É—é –∑–∞–ø–∏—Å—å
4. –ù–∞–∂–∞—Ç—å "‚úì –°–æ–∑–¥–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"

---

## Roadmap

- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ (Supabase Storage)
- [ ] –ò–º–ø–æ—Ä—Ç –∏–∑ CSV/Excel
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Å–ø–∏—Å–∫–∞
- [ ] –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- [ ] –ö–∞–ª–µ–Ω–¥–∞—Ä—å –æ—Ç–ø—É—Å–∫–æ–≤
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–Ω—è—Ö —Ä–æ–∂–¥–µ–Ω–∏—è
- [ ] –¢–∞–±–µ–ª—å —É—á—ë—Ç–∞ —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- [ ] –†–µ–π—Ç–∏–Ω–≥ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- [ ] –ê–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ —Ç–µ–Ω–¥–µ—Ä—ã

---

**–ú–æ–¥—É–ª—å –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ
