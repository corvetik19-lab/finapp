# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ embeddings

## üìö –ß—Ç–æ —ç—Ç–æ?

GitHub Actions –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞—Ç—å API –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ embeddings –∫–∞–∂–¥—É—é –Ω–æ—á—å –≤ 2:00 UTC (5:00 –ú–°–ö).

–≠—Ç–æ **–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞** CRON –∑–∞–¥–∞—á–µ Vercel (—É –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å –ª–∏–º–∏—Ç 2 –∑–∞–¥–∞—á–∏ –Ω–∞ free –ø–ª–∞–Ω–µ).

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub:
```
https://github.com/corvetik19-lab/finapp
```

### 2. –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã

**Settings** ‚Üí **Secrets and variables** ‚Üí **Actions** ‚Üí **New repository secret**

#### –°–µ–∫—Ä–µ—Ç 1: `CRON_SECRET`

- **Name:** `CRON_SECRET`
- **Value:** `f8e3c2a1d9b7e4f6a0c8d2e5b9f1a3c7`

(–≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –≤–∞—à–µ–≥–æ `.env.local`)

#### –°–µ–∫—Ä–µ—Ç 2: `VERCEL_APP_URL`

- **Name:** `VERCEL_APP_URL`
- **Value:** `https://finappka.vercel.app`

(URL –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Vercel)

### 3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –æ–Ω–∏ –±—É–¥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```
CRON_SECRET ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢
VERCEL_APP_URL ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫

Workflow –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—É—é –Ω–æ—á—å –≤ 2:00 UTC** (5:00 –ú–°–ö).

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Actions** ‚Üí **Generate AI Embeddings**
2. –ù–∞–∂–º–∏—Ç–µ **Run workflow**
3. –í—ã–±–µ—Ä–∏—Ç–µ branch: `main`
4. –ù–∞–∂–º–∏—Ç–µ **Run workflow**

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Actions** –≤ –≤–∞—à–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—Å–∫ **Generate AI Embeddings**
3. –û—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏

**–£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
HTTP Status: 200
Response: {"success":true,"processed":15,"created":12,"skipped":3}
‚úÖ Embeddings generated successfully
```

**–û—à–∏–±–∫–∞:**
```
HTTP Status: 401
Response: {"error":"Unauthorized"}
‚ùå Error: Failed to generate embeddings
```

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ 401 - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `CRON_SECRET`.

## üìù –§–∞–π–ª workflow

–§–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `.github/workflows/generate-embeddings.yml`

```yaml
name: Generate AI Embeddings

on:
  schedule:
    - cron: '0 2 * * *'  # –ö–∞–∂–¥—É—é –Ω–æ—á—å –≤ 2:00 UTC
  workflow_dispatch:      # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

jobs:
  generate-embeddings:
    runs-on: ubuntu-latest
    steps:
      - name: Generate embeddings via API
        run: |
          curl -X GET "${{ secrets.VERCEL_APP_URL }}/api/ai/generate-embeddings" \
            -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}"
```

## üéØ –õ–∏–º–∏—Ç—ã GitHub Actions

**Free –ø–ª–∞–Ω GitHub:**
- ‚úÖ 2,000 –º–∏–Ω—É—Ç/–º–µ—Å—è—Ü
- ‚úÖ –ù–∞—à workflow: ~5 —Å–µ–∫—É–Ω–¥/–¥–µ–Ω—å = 2.5 –º–∏–Ω—É—Ç—ã/–º–µ—Å—è—Ü
- ‚úÖ **–ë–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ!**

## ‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

| Vercel CRON | GitHub Actions |
|-------------|----------------|
| ‚ùå –õ–∏–º–∏—Ç 2 –∑–∞–¥–∞—á–∏ | ‚úÖ –ë–µ–∑ –ª–∏–º–∏—Ç–∞ –∑–∞–¥–∞—á |
| ‚ùå –ü–ª–∞—Ç–Ω–æ –∑–∞ –±–æ–ª—å—à–µ | ‚úÖ 2000 –º–∏–Ω—É—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ |
| ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ | ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ |

## üîç Troubleshooting

### –û—à–∏–±–∫–∞: "Unauthorized"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `CRON_SECRET`

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ GitHub Secrets, –æ–Ω–æ –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `CRON_SECRET` –≤ Vercel Environment Variables.

### –û—à–∏–±–∫–∞: "404 Not Found"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –∏–ª–∏ endpoint –Ω–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `VERCEL_APP_URL` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `https://finappka.vercel.app`)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ –Ω–∞ Vercel
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª `app/api/ai/generate-embeddings/route.ts` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### Workflow –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –§–∞–π–ª workflow –µ—â—ë –Ω–µ –≤ main –≤–µ—Ç–∫–µ

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ —Ñ–∞–π–ª `.github/workflows/generate-embeddings.yml`

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ embeddings –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—É—é –Ω–æ—á—å! üéâ
