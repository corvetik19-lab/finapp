# üéâ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ FinApp

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

#### **PlatformHeader** - –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å
- –õ–æ–≥–æ—Ç–∏–ø —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
- ModeSwitcher (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤)
- NotificationCenter (—Ü–µ–Ω—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- OrganizationSwitcher (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π)
- UserMenu (–º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–æ—Ñ–∏–ª–µ–º –∏ –≤—ã—Ö–æ–¥–æ–º)

#### **ModeSwitcher** - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏
- –ö—Ä–∞—Å–∏–≤—ã–π dropdown —Å preview
- –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–∂–∏–º–∞
- Badges: PRO, –ê–∫—Ç–∏–≤–µ–Ω, –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- Responsive –¥–∏–∑–∞–π–Ω

#### **NotificationCenter** - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –°—á—ë—Ç—á–∏–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- –¢–∏–ø—ã: info, success, warning, error
- Action buttons
- Empty state

#### **OrganizationSwitcher** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Badges –¥–ª—è —Ç–∞—Ä–∏—Ñ–æ–≤ (Free/Pro/Enterprise)
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

#### **UserMenu** - –ú–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–æ—Ñ–∏–ª—å, –ù–∞—Å—Ç—Ä–æ–π–∫–∏, –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è, –ü–æ–º–æ—â—å
- –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- Avatar —Å –∏–Ω–∏—Ü–∏–∞–ª–∞–º–∏

#### **ModePlaceholder** - –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–µ–∂–∏–º–æ–≤
- –ö—Ä–∞—Å–∏–≤—ã–π UI
- –°–ø–∏—Å–æ–∫ –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- CTA –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 2. –°—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–∂–∏–º–æ–≤

‚úÖ **/investments** - –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ (placeholder)
‚úÖ **/personal** - –õ–∏—á–Ω—ã–µ (placeholder)  
‚úÖ **/tenders** - –¢–µ–Ω–¥–µ—Ä—ã (placeholder)
‚úÖ **/finance** - –§–∏–Ω–∞–Ω—Å—ã (–ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

‚úÖ **organizations** - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏  
‚úÖ **organization_members** - –ß–ª–µ–Ω—ã —Å —Ä–æ–ª—è–º–∏  
‚úÖ **organization_mode_settings** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–∂–∏–º–æ–≤  
‚úÖ **organization_integrations** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏  

‚úÖ **RLS –ø–æ–ª–∏—Ç–∏–∫–∏** –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü  
‚úÖ **org_id** –¥–æ–±–∞–≤–ª–µ–Ω –∫–æ –≤—Å–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ç–∞–±–ª–∏—Ü–∞–º  
‚úÖ **270 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã  

### 4. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏

‚úÖ `lib/platform/mode-registry.ts` - —Ä–µ–µ—Å—Ç—Ä —Ä–µ–∂–∏–º–æ–≤
‚úÖ `lib/platform/organization.ts` - helpers –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π

## üìã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Header

```typescript
// app/layout.tsx
import PlatformHeader from "@/components/platform/PlatformHeader";
import UserMenu from "@/components/platform/UserMenu";
import NotificationCenter from "@/components/platform/NotificationCenter";
import OrganizationSwitcher from "@/components/platform/OrganizationSwitcher";

export default async function RootLayout({ children }: { children: React.ReactNode }) {
  const supabase = await createRouteClient();
  const { data: { user } } = await supabase.auth.getUser();
  const organization = user ? await getCurrentOrganization() : null;
  const organizations = user ? await getUserOrganizations() : [];

  return (
    <html>
      <body>
        {user && (
          <PlatformHeader
            user={{
              email: user.email,
              full_name: user.user_metadata?.full_name,
            }}
            organization={organization ? { name: organization.name } : undefined}
            notificationCount={5}
          />
        )}
        <main>{children}</main>
      </body>
    </html>
  );
}
```

### User Menu

```typescript
<UserMenu
  user={{
    email: "user@example.com",
    full_name: "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    avatar_url: "/avatars/user.jpg", // optional
  }}
/>
```

### Notification Center

```typescript
<NotificationCenter
  notifications={[
    {
      id: "1",
      type: "success",
      title: "–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞",
      message: "–ù–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–∞ —Å—É–º–º—É 1500‚ÇΩ",
      timestamp: "5 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥",
      read: false,
      action: {
        label: "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å",
        href: "/transactions/123",
      },
    },
  ]}
  unreadCount={3}
/>
```

### Organization Switcher

```typescript
<OrganizationSwitcher
  currentOrganization={{
    id: "org-1",
    name: "–ú–æ—è –∫–æ–º–ø–∞–Ω–∏—è",
    slug: "my-company",
    subscription_plan: "pro",
  }}
  organizations={[
    // ... —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
  ]}
/>
```

## üöÄ –í–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–µ–∂–∏–º–æ–≤

### –®–∞–≥ 1: –í–∫–ª—é—á–∏—Ç—å –≤ mode-registry

```typescript
// lib/platform/mode-registry.ts
export const MODE_REGISTRY = {
  investments: {
    isEnabled: true, // –ë—ã–ª–æ: false
    // ...
  },
};
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

```typescript
// app/(protected)/investments/dashboard/page.tsx
export default function InvestmentsDashboard() {
  return (
    <div>
      <h1>Dashboard –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π</h1>
      {/* –í–∞—à —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª */}
    </div>
  );
}
```

### –®–∞–≥ 3: –ì–æ—Ç–æ–≤–æ!

Mode Switcher –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∂–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º.

## üé® CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `globals.css` –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```css
:root {
  /* Surfaces */
  --surface-primary: #ffffff;
  --surface-secondary: #f8f9fa;
  --surface-tertiary: #e9ecef;
  --surface-hover: #f1f3f5;
  --surface-active: #e7f5ff;

  /* Text */
  --text-primary: #212529;
  --text-secondary: #6c757d;
  --text-tertiary: #adb5bd;

  /* Borders */
  --border-primary: #dee2e6;
  --border-hover: #adb5bd;

  /* Brand */
  --primary: #6366f1;
  --primary-dark: #4f46e5;
  --primary-alpha: rgba(99, 102, 241, 0.1);
  
  --success: #10b981;
  --danger: #ef4444;
  --warning: #f59e0b;
}
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
components/platform/
‚îú‚îÄ‚îÄ PlatformHeader.tsx          # –ì–ª–∞–≤–Ω—ã–π header
‚îú‚îÄ‚îÄ ModeSwitcher.tsx            # –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤
‚îú‚îÄ‚îÄ UserMenu.tsx                # –ú–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îú‚îÄ‚îÄ UserMenu.module.css
‚îú‚îÄ‚îÄ NotificationCenter.tsx      # –¶–µ–Ω—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îú‚îÄ‚îÄ NotificationCenter.module.css
‚îú‚îÄ‚îÄ OrganizationSwitcher.tsx    # –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å org
‚îú‚îÄ‚îÄ OrganizationSwitcher.module.css
‚îú‚îÄ‚îÄ ModePlaceholder.tsx         # –ó–∞–≥–ª—É—à–∫–∏
‚îú‚îÄ‚îÄ ModePlaceholder.module.css
‚îî‚îÄ‚îÄ Platform.module.css         # –û–±—â–∏–µ —Å—Ç–∏–ª–∏

app/(protected)/
‚îú‚îÄ‚îÄ investments/
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx                # Placeholder
‚îú‚îÄ‚îÄ personal/
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx                # Placeholder
‚îî‚îÄ‚îÄ tenders/
    ‚îî‚îÄ‚îÄ page.tsx                # Placeholder

lib/platform/
‚îú‚îÄ‚îÄ mode-registry.ts            # –†–µ–µ—Å—Ç—Ä —Ä–µ–∂–∏–º–æ–≤
‚îî‚îÄ‚îÄ organization.ts             # Helpers

docs/
‚îú‚îÄ‚îÄ PLATFORM_ARCHITECTURE.md    # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
‚îú‚îÄ‚îÄ MIGRATION_GUIDE.md          # –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ MIGRATION_REPORT.md         # –û—Ç—á—ë—Ç –æ –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ PLATFORM_INTEGRATION_GUIDE.md # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ COMPLETE_PLATFORM_GUIDE.md  # –≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **RLS** –≤–∫–ª—é—á—ë–Ω –Ω–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö  
‚úÖ **org_id** –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **Role-based access** (Owner/Admin/Member/Viewer)  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** —á–µ—Ä–µ–∑ RLS  

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

```sql
-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
SELECT 
  (SELECT COUNT(*) FROM organizations) as –æ—Ä–≥,
  (SELECT COUNT(*) FROM organization_members) as —á–ª–µ–Ω–æ–≤,
  (SELECT COUNT(*) FROM transactions WHERE org_id IS NOT NULL) as —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π,
  (SELECT COUNT(*) FROM accounts WHERE org_id IS NOT NULL) as —Å—á–µ—Ç–æ–≤;
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –î–ª—è —Ä–µ–∂–∏–º–∞ "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏":
1. –°–æ–∑–¥–∞—Ç—å `/investments/dashboard`
2. –°–æ–∑–¥–∞—Ç—å `/investments/portfolio`
3. –°–æ–∑–¥–∞—Ç—å `/investments/transactions`
4. –í–∫–ª—é—á–∏—Ç—å `isEnabled: true` –≤ registry

### –î–ª—è —Ä–µ–∂–∏–º–∞ "–õ–∏—á–Ω—ã–µ":
1. –°–æ–∑–¥–∞—Ç—å `/personal/notes`
2. –°–æ–∑–¥–∞—Ç—å `/personal/tasks`
3. –°–æ–∑–¥–∞—Ç—å `/personal/calendar`
4. –í–∫–ª—é—á–∏—Ç—å `isEnabled: true` –≤ registry

### –î–ª—è —Ä–µ–∂–∏–º–∞ "–¢–µ–Ω–¥–µ—Ä—ã":
1. –°–æ–∑–¥–∞—Ç—å `/tenders/list`
2. –°–æ–∑–¥–∞—Ç—å `/tenders/documents`
3. –°–æ–∑–¥–∞—Ç—å `/tenders/analytics`
4. –í–∫–ª—é—á–∏—Ç—å `isEnabled: true` –≤ registry

## üÜò Troubleshooting

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- CSS –º–æ–¥—É–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
- –ò–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ globals.css

### Mode Switcher –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- `isEnabled: true` –≤ mode-registry.ts
- `getAvailableModes()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∂–∏–º—ã

### RLS –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ organization_members
- org_id —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∑–∞–ø–∏—Å–µ–π
- –ü–æ–ª–∏—Ç–∏–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã

## üìù –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [x] –¢–∞–±–ª–∏—Ü—ã multi-tenancy —Å–æ–∑–¥–∞–Ω—ã
- [x] RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [x] org_id –¥–æ–±–∞–≤–ª–µ–Ω –∫ —Ç–∞–±–ª–∏—Ü–∞–º
- [x] –î–∞–Ω–Ω—ã–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [x] PlatformHeader
- [x] ModeSwitcher
- [x] UserMenu
- [x] NotificationCenter
- [x] OrganizationSwitcher
- [x] ModePlaceholder

### –°—Ç—Ä–∞–Ω–∏—Ü—ã
- [x] /investments
- [x] /personal
- [x] /tenders

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] PLATFORM_ARCHITECTURE.md
- [x] MIGRATION_GUIDE.md
- [x] MIGRATION_REPORT.md
- [x] PLATFORM_INTEGRATION_GUIDE.md
- [x] COMPLETE_PLATFORM_GUIDE.md

## üéä –ò—Ç–æ–≥

**–ü–õ–ê–¢–§–û–†–ú–ê –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–ê!**

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã.  
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞, multi-tenancy —Ä–∞–±–æ—Ç–∞–µ—Ç.  
–ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–µ–∂–∏–º–æ–≤!

---

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞:** 4 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** Production Ready üöÄ
