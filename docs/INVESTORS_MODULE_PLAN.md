# –ú–æ–¥—É–ª—å "–ò–Ω–≤–µ—Å—Ç–æ—Ä—ã" ‚Äî –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## –û–±–∑–æ—Ä

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ–º –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –≤ —Ç–µ–Ω–¥–µ—Ä—ã. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–≤–ª–µ–∫–∞—Ç—å —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç –±–∞–Ω–∫–æ–≤ –∏–ª–∏ —á–∞—Å—Ç–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ –ø–æ–¥ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤, —É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç—ã –≤ –∑–∞—Ç—Ä–∞—Ç–∞—Ö —Ç–µ–Ω–¥–µ—Ä–∞.

---

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

### 1.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤

/investors                      ‚Äî –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–¥—É–ª—è (–¥–∞—à–±–æ—Ä–¥)
/investors/sources              ‚Äî –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è (–±–∞–Ω–∫–∏, –∏–Ω–≤–µ—Å—Ç–æ—Ä—ã)
/investors/investments          ‚Äî –°–ø–∏—Å–æ–∫ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
/investors/investments/[id]     ‚Äî –î–µ—Ç–∞–ª–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
/investors/investments/new      ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
/investors/returns              ‚Äî –ì—Ä–∞—Ñ–∏–∫ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
/investors/reports              ‚Äî –û—Ç—á—ë—Ç—ã –ø–æ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–º
/investors/settings             ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è

/investor-portal                ‚Äî –ü–æ—Ä—Ç–∞–ª –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ (—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä)
/investor-portal/[investmentId] ‚Äî –î–µ—Ç–∞–ª–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞

### 1.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

app/(protected)/investors/           ‚Äî –°—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥—É–ª—è (–¥–ª—è –∞–¥–º–∏–Ω–∞)
app/(protected)/investor-portal/     ‚Äî –ü–æ—Ä—Ç–∞–ª –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ (—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä)

components/investors/
  ‚îú‚îÄ‚îÄ layout/
  ‚îÇ   ‚îú‚îÄ‚îÄ InvestorsLayout.tsx        ‚Äî Layout —Å –º–µ–Ω—é –º–æ–¥—É–ª—è
  ‚îÇ   ‚îú‚îÄ‚îÄ InvestorsSidebar.tsx       ‚Äî –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é
  ‚îÇ   ‚îî‚îÄ‚îÄ InvestorsHeader.tsx        ‚Äî –®–∞–ø–∫–∞ –º–æ–¥—É–ª—è
  ‚îú‚îÄ‚îÄ sources/
  ‚îÇ   ‚îú‚îÄ‚îÄ SourcesList.tsx            ‚Äî –°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
  ‚îÇ   ‚îú‚îÄ‚îÄ SourceForm.tsx             ‚Äî –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  ‚îÇ   ‚îî‚îÄ‚îÄ SourceCard.tsx             ‚Äî –ö–∞—Ä—Ç–æ—á–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
  ‚îú‚îÄ‚îÄ investments/
  ‚îÇ   ‚îú‚îÄ‚îÄ InvestmentsList.tsx        ‚Äî –°–ø–∏—Å–æ–∫ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
  ‚îÇ   ‚îú‚îÄ‚îÄ InvestmentForm.tsx         ‚Äî –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
  ‚îÇ   ‚îú‚îÄ‚îÄ InvestmentDetails.tsx      ‚Äî –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
  ‚îÇ   ‚îú‚îÄ‚îÄ InvestmentTimeline.tsx     ‚Äî –¢–∞–π–º–ª–∞–π–Ω —Å–æ–±—ã—Ç–∏–π
  ‚îÇ   ‚îî‚îÄ‚îÄ FundingStructure.tsx       ‚Äî –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è
  ‚îú‚îÄ‚îÄ returns/
  ‚îÇ   ‚îú‚îÄ‚îÄ ReturnsCalendar.tsx        ‚Äî –ö–∞–ª–µ–Ω–¥–∞—Ä—å –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
  ‚îÇ   ‚îú‚îÄ‚îÄ ReturnForm.tsx             ‚Äî –§–æ—Ä–º–∞ —Ñ–∏–∫—Å–∞—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞
  ‚îÇ   ‚îî‚îÄ‚îÄ ReturnsList.tsx            ‚Äî –°–ø–∏—Å–æ–∫ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
  ‚îú‚îÄ‚îÄ portal/
  ‚îÇ   ‚îú‚îÄ‚îÄ InvestorDashboard.tsx      ‚Äî –î–∞—à–±–æ—Ä–¥ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞
  ‚îÇ   ‚îú‚îÄ‚îÄ InvestmentView.tsx         ‚Äî –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ (readonly)
  ‚îÇ   ‚îî‚îÄ‚îÄ TenderProgress.tsx         ‚Äî –ü—Ä–æ–≥—Ä–µ—Å—Å —Ç–µ–Ω–¥–µ—Ä–∞
  ‚îú‚îÄ‚îÄ widgets/
  ‚îÇ   ‚îú‚îÄ‚îÄ TotalInvestedWidget.tsx    ‚Äî –í–∏–¥–∂–µ—Ç —Å—É–º–º—ã –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
  ‚îÇ   ‚îú‚îÄ‚îÄ ReturnsWidget.tsx          ‚Äî –í–∏–¥–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
  ‚îÇ   ‚îú‚îÄ‚îÄ ProfitWidget.tsx           ‚Äî –í–∏–¥–∂–µ—Ç –ø—Ä–∏–±—ã–ª–∏ –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤
  ‚îÇ   ‚îî‚îÄ‚îÄ ActiveInvestmentsWidget.tsx‚Äî –í–∏–¥–∂–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
  ‚îî‚îÄ‚îÄ reports/
      ‚îú‚îÄ‚îÄ InvestorReport.tsx         ‚Äî –û—Ç—á—ë—Ç –ø–æ –∏–Ω–≤–µ—Å—Ç–æ—Ä—É
      ‚îî‚îÄ‚îÄ TenderInvestmentReport.tsx ‚Äî –û—Ç—á—ë—Ç –ø–æ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–º –≤ —Ç–µ–Ω–¥–µ—Ä

lib/investors/
  ‚îú‚îÄ‚îÄ types.ts                       ‚Äî TypeScript —Ç–∏–ø—ã
  ‚îú‚îÄ‚îÄ service.ts                     ‚Äî CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
  ‚îú‚îÄ‚îÄ calculations.ts                ‚Äî –†–∞—Å—á—ë—Ç—ã –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
  ‚îú‚îÄ‚îÄ returns.ts                     ‚Äî –õ–æ–≥–∏–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
  ‚îî‚îÄ‚îÄ reports.ts                     ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤

---

## 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### 2.1 –¢–∞–±–ª–∏—Ü–∞ `investment_sources` ‚Äî –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è

```sql
CREATE TABLE investment_sources (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id),
  
  -- –¢–∏–ø –∏—Å—Ç–æ—á–Ω–∏–∫–∞
  source_type TEXT NOT NULL CHECK (source_type IN ('bank', 'private', 'fund', 'other')),
  
  -- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  name TEXT NOT NULL,                    -- –ù–∞–∑–≤–∞–Ω–∏–µ (–û–û–û "–ò–Ω–≤–µ—Å—Ç", –°–±–µ—Ä–±–∞–Ω–∫, –ò–≤–∞–Ω–æ–≤ –ò.–ò.)
  contact_person TEXT,                   -- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ
  phone TEXT,
  email TEXT,
  
  -- –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
  bank_name TEXT,
  bank_bik TEXT,
  bank_account TEXT,
  correspondent_account TEXT,
  
  -- –Æ—Ä. –¥–∞–Ω–Ω—ã–µ (–¥–ª—è —é—Ä–ª–∏—Ü)
  inn TEXT,
  kpp TEXT,
  ogrn TEXT,
  legal_address TEXT,
  
  -- –£—Å–ª–æ–≤–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  default_interest_rate DECIMAL(5,2),    -- –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  default_period_days INTEGER,           -- –°—Ä–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–¥–Ω–∏)
  
  -- –°—Ç–∞—Ç—É—Å
  is_active BOOLEAN DEFAULT true,
  notes TEXT,
  
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- RLS
ALTER TABLE investment_sources ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Users can manage own sources" ON investment_sources
  FOR ALL USING (user_id = auth.uid());

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_investment_sources_user ON investment_sources(user_id);
CREATE INDEX idx_investment_sources_type ON investment_sources(source_type);
```

### 2.2 –¢–∞–±–ª–∏—Ü–∞ `investments` ‚Äî –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏

```sql
CREATE TABLE investments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id),
  
  -- –°–≤—è–∑–∏
  source_id UUID NOT NULL REFERENCES investment_sources(id),
  tender_id UUID REFERENCES tenders(id),           -- –°–≤—è–∑—å —Å —Ç–µ–Ω–¥–µ—Ä–æ–º
  
  -- –ù–æ–º–µ—Ä –∏ –¥–∞—Ç–∞
  investment_number TEXT NOT NULL,                 -- –ù–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞/—Å–æ–≥–ª–∞—à–µ–Ω–∏—è
  investment_date DATE NOT NULL,                   -- –î–∞—Ç–∞ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è
  
  -- –°—É–º–º—ã (–≤ –∫–æ–ø–µ–π–∫–∞—Ö)
  requested_amount BIGINT NOT NULL,                -- –ó–∞–ø—Ä–æ—à–µ–Ω–Ω–∞—è —Å—É–º–º–∞
  approved_amount BIGINT NOT NULL,                 -- –û–¥–æ–±—Ä–µ–Ω–Ω–∞—è —Å—É–º–º–∞
  received_amount BIGINT DEFAULT 0,                -- –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–µ–Ω–æ
  
  -- –£—Å–ª–æ–≤–∏—è
  interest_rate DECIMAL(5,2) NOT NULL,             -- –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞ (–≥–æ–¥–æ–≤—ã—Ö)
  interest_type TEXT DEFAULT 'annual' CHECK (interest_type IN ('annual', 'monthly', 'fixed')),
  period_days INTEGER NOT NULL,                    -- –°—Ä–æ–∫ (–¥–Ω–∏)
  due_date DATE NOT NULL,                          -- –î–∞—Ç–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞
  
  -- –†–∞—Å—á—ë—Ç—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
  interest_amount BIGINT DEFAULT 0,                -- –°—É–º–º–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
  total_return_amount BIGINT DEFAULT 0,            -- –í—Å–µ–≥–æ –∫ –≤–æ–∑–≤—Ä–∞—Ç—É
  returned_principal BIGINT DEFAULT 0,             -- –í–æ–∑–≤—Ä–∞—â–µ–Ω–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–ª–≥–∞
  returned_interest BIGINT DEFAULT 0,              -- –í–æ–∑–≤—Ä–∞—â–µ–Ω–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
  
  -- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–Ω–¥–µ—Ä–∞
  tender_total_cost BIGINT,                        -- –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–µ–Ω–¥–µ—Ä–∞
  own_funds_amount BIGINT DEFAULT 0,               -- –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞
  investment_share DECIMAL(5,2),                   -- –î–æ–ª—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π %
  
  -- –°—Ç–∞—Ç—É—Å
  status TEXT DEFAULT 'draft' CHECK (status IN (
    'draft',        -- –ß–µ—Ä–Ω–æ–≤–∏–∫
    'requested',    -- –ó–∞–ø—Ä–æ—à–µ–Ω–æ
    'approved',     -- –û–¥–æ–±—Ä–µ–Ω–æ
    'received',     -- –°—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ–ª—É—á–µ–Ω—ã
    'in_progress',  -- –í –ø—Ä–æ—Ü–µ—Å—Å–µ (—Ç–µ–Ω–¥–µ—Ä –∏–¥—ë—Ç)
    'returning',    -- –ò–¥—ë—Ç –≤–æ–∑–≤—Ä–∞—Ç
    'completed',    -- –ó–∞–≤–µ—Ä—à–µ–Ω–æ (–≤—Å—ë –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ)
    'overdue',      -- –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ
    'cancelled'     -- –û—Ç–º–µ–Ω–µ–Ω–æ
  )),
  
  -- –î–æ–∫—É–º–µ–Ω—Ç—ã
  contract_url TEXT,                               -- –°—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ–≥–æ–≤–æ—Ä
  
  -- –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
  purpose TEXT,                                    -- –¶–µ–ª—å –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è
  notes TEXT,
  
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- RLS
ALTER TABLE investments ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Users can manage own investments" ON investments
  FOR ALL USING (user_id = auth.uid());

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_investments_user ON investments(user_id);
CREATE INDEX idx_investments_source ON investments(source_id);
CREATE INDEX idx_investments_tender ON investments(tender_id);
CREATE INDEX idx_investments_status ON investments(status);
CREATE INDEX idx_investments_due_date ON investments(due_date);
```

### 2.3 –¢–∞–±–ª–∏—Ü–∞ `investment_transactions` ‚Äî –î–≤–∏–∂–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤

```sql
CREATE TABLE investment_transactions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id),
  investment_id UUID NOT NULL REFERENCES investments(id) ON DELETE CASCADE,
  
  -- –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏
  transaction_type TEXT NOT NULL CHECK (transaction_type IN (
    'receipt',           -- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –æ—Ç –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞
    'return_principal',  -- –í–æ–∑–≤—Ä–∞—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–ª–≥–∞
    'return_interest',   -- –í—ã–ø–ª–∞—Ç–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
    'penalty',           -- –®—Ç—Ä–∞—Ñ/–ø–µ–Ω—è
    'adjustment'         -- –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞
  )),
  
  -- –°—É–º–º–∞
  amount BIGINT NOT NULL,                          -- –°—É–º–º–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–≤ –∫–æ–ø–µ–π–∫–∞—Ö)
  
  -- –î–∞—Ç–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç
  transaction_date DATE NOT NULL,
  document_number TEXT,
  document_date DATE,
  
  -- –°–≤—è–∑—å —Å –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–µ–π
  accounting_document_id UUID,                     -- –°–≤—è–∑—å —Å accounting_documents
  bank_operation_id UUID,                          -- –°–≤—è–∑—å —Å bank_operations
  
  -- –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
  notes TEXT,
  
  created_at TIMESTAMPTZ DEFAULT now()
);

-- RLS
ALTER TABLE investment_transactions ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Users can manage own transactions" ON investment_transactions
  FOR ALL USING (user_id = auth.uid());

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_inv_transactions_investment ON investment_transactions(investment_id);
CREATE INDEX idx_inv_transactions_type ON investment_transactions(transaction_type);
CREATE INDEX idx_inv_transactions_date ON investment_transactions(transaction_date);
```

### 2.4 –¢–∞–±–ª–∏—Ü–∞ `investment_returns_schedule` ‚Äî –ì—Ä–∞—Ñ–∏–∫ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤

```sql
CREATE TABLE investment_returns_schedule (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id),
  investment_id UUID NOT NULL REFERENCES investments(id) ON DELETE CASCADE,
  
  -- –ü–ª–∞–Ω–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂
  payment_number INTEGER NOT NULL,                 -- –ù–æ–º–µ—Ä –ø–ª–∞—Ç–µ–∂–∞
  scheduled_date DATE NOT NULL,                    -- –ü–ª–∞–Ω–æ–≤–∞—è –¥–∞—Ç–∞
  
  -- –°—É–º–º—ã
  principal_amount BIGINT DEFAULT 0,               -- –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–ª–≥
  interest_amount BIGINT DEFAULT 0,                -- –ü—Ä–æ—Ü–µ–Ω—Ç—ã
  total_amount BIGINT NOT NULL,                    -- –í—Å–µ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ
  
  -- –§–∞–∫—Ç
  paid_amount BIGINT DEFAULT 0,                    -- –û–ø–ª–∞—á–µ–Ω–æ
  paid_date DATE,                                  -- –î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã
  
  -- –°—Ç–∞—Ç—É—Å
  status TEXT DEFAULT 'pending' CHECK (status IN (
    'pending',      -- –û–∂–∏–¥–∞–µ—Ç
    'partial',      -- –ß–∞—Å—Ç–∏—á–Ω–æ –æ–ø–ª–∞—á–µ–Ω
    'paid',         -- –û–ø–ª–∞—á–µ–Ω
    'overdue'       -- –ü—Ä–æ—Å—Ä–æ—á–µ–Ω
  )),
  
  notes TEXT,
  created_at TIMESTAMPTZ DEFAULT now()
);

-- RLS
ALTER TABLE investment_returns_schedule ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Users can manage own schedule" ON investment_returns_schedule
  FOR ALL USING (user_id = auth.uid());

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_returns_schedule_investment ON investment_returns_schedule(investment_id);
CREATE INDEX idx_returns_schedule_date ON investment_returns_schedule(scheduled_date);
CREATE INDEX idx_returns_schedule_status ON investment_returns_schedule(status);
```

### 2.5 –¢–∞–±–ª–∏—Ü–∞ `investor_access` ‚Äî –î–æ—Å—Ç—É–ø –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤

```sql
CREATE TABLE investor_access (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id),        -- –í–ª–∞–¥–µ–ª–µ—Ü (–∞–¥–º–∏–Ω)
  
  -- –ò–Ω–≤–µ—Å—Ç–æ—Ä
  source_id UUID NOT NULL REFERENCES investment_sources(id),
  investor_email TEXT NOT NULL,                           -- Email –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞
  investor_user_id UUID REFERENCES auth.users(id),        -- –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (–µ—Å–ª–∏ –µ—Å—Ç—å)
  
  -- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
  can_view_tender_details BOOLEAN DEFAULT true,           -- –í–∏–¥–∏—Ç –¥–µ—Ç–∞–ª–∏ —Ç–µ–Ω–¥–µ—Ä–∞
  can_view_documents BOOLEAN DEFAULT false,               -- –í–∏–¥–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã
  can_view_financials BOOLEAN DEFAULT true,               -- –í–∏–¥–∏—Ç —Ñ–∏–Ω–∞–Ω—Å—ã
  can_download_reports BOOLEAN DEFAULT true,              -- –ú–æ–∂–µ—Ç —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ç—á—ë—Ç—ã
  
  -- –°—Ç–∞—Ç—É—Å
  status TEXT DEFAULT 'pending' CHECK (status IN ('pending', 'active', 'revoked')),
  invite_token TEXT,                                      -- –¢–æ–∫–µ–Ω –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
  invite_sent_at TIMESTAMPTZ,
  activated_at TIMESTAMPTZ,
  
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now(),
  
  UNIQUE(source_id, investor_email)
);

-- RLS –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ (—á—Ç–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π)
ALTER TABLE investor_access ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Admins can manage access" ON investor_access
  FOR ALL USING (user_id = auth.uid());

CREATE POLICY "Investors can view own access" ON investor_access
  FOR SELECT USING (investor_user_id = auth.uid());
```

### 2.6 –°–≤—è–∑—å —Å —Ç–µ–Ω–¥–µ—Ä–∞–º–∏ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è

```sql
-- –î–æ–±–∞–≤–∏—Ç—å –≤ —Ç–∞–±–ª–∏—Ü—É tenders
ALTER TABLE tenders ADD COLUMN IF NOT EXISTS
  has_investment BOOLEAN DEFAULT false,
  investment_amount BIGINT DEFAULT 0,
  own_funds_amount BIGINT DEFAULT 0,
  investment_interest_cost BIGINT DEFAULT 0;  -- –ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –ø—Ä–æ—Ü–µ–Ω—Ç—ã
```

---

## 3. –†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø

### 3.1 –†–æ–ª–∏

| –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ | –î–æ—Å—Ç—É–ø |
|------|----------|--------|
| **admin** | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É –º–æ–¥—É–ª—é |
| **investor** | –ò–Ω–≤–µ—Å—Ç–æ—Ä | –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç–∞–ª |

### 3.2 –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–∞

| –§—É–Ω–∫—Ü–∏—è | Admin | Investor |
|---------|-------|----------|
| –°–æ–∑–¥–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ | ‚úÖ | ‚ùå |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ | ‚úÖ | ‚ùå |
| –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ | ‚úÖ | ‚ùå |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ | ‚úÖ | ‚ùå |
| –§–∏–∫—Å–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ | ‚úÖ | ‚ùå |
| –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π | ‚úÖ | ‚úÖ |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ç–µ–Ω–¥–µ—Ä–∞ | ‚úÖ | ‚úÖ (–µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ) |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | ‚úÖ | ‚úÖ (–µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ) |
| –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤ | ‚úÖ | ‚úÖ (–µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ) |
| –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ | ‚úÖ | ‚ùå |

---

## 4. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### 4.1 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è

- **CRUD** –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–±–∞–Ω–∫–∏, —á–∞—Å—Ç–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–æ—Ä—ã, —Ñ–æ–Ω–¥—ã)
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (—Å—Ç–∞–≤–∫–∞, —Å—Ä–æ–∫)
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞

### 4.2 –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏

**–®–∞–≥–∏:**

1. –í—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è
2. –í—ã–±–æ—Ä —Ç–µ–Ω–¥–µ—Ä–∞
3. –£–∫–∞–∑–∞–Ω–∏–µ —Å—É–º–º—ã –∏ —É—Å–ª–æ–≤–∏–π
4. –†–∞—Å—á—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è:
   - –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–µ–Ω–¥–µ—Ä–∞
   - –°—É–º–º–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
   - –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞
   - –î–æ–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ (%)
5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
6. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤

### 4.3 –†–∞—Å—á—ë—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤

–§–æ—Ä–º—É–ª—ã:

1. –ì–æ–¥–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞:
   interest = principal √ó (rate/100) √ó (days/365)

2. –ú–µ—Å—è—á–Ω–∞—è —Å—Ç–∞–≤–∫–∞:
   interest = principal √ó (rate/100) √ó months

3. –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è:
   interest = principal √ó (rate/100)

–ü—Ä–∏–º–µ—Ä:

- –°—É–º–º–∞: 1,000,000 ‚ÇΩ
- –°—Ç–∞–≤–∫–∞: 24% –≥–æ–¥–æ–≤—ã—Ö
- –°—Ä–æ–∫: 90 –¥–Ω–µ–π
- –ü—Ä–æ—Ü–µ–Ω—Ç—ã: 1,000,000 √ó 0.24 √ó (90/365) = 59,178 ‚ÇΩ
- –í—Å–µ–≥–æ –∫ –≤–æ–∑–≤—Ä–∞—Ç—É: 1,059,178 ‚ÇΩ

### 4.4 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–Ω–¥–µ—Ä–∞

–ü—Ä–∏–º–µ—Ä:

–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–µ–Ω–¥–µ—Ä–∞: 5,000,000 ‚ÇΩ
‚îú‚îÄ‚îÄ –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏—è #1 (–°–±–µ—Ä–±–∞–Ω–∫): 3,000,000 ‚ÇΩ (60%)
‚îú‚îÄ‚îÄ –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏—è #2 (–ß–∞—Å—Ç–Ω—ã–π): 1,000,000 ‚ÇΩ (20%)
‚îî‚îÄ‚îÄ –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞: 1,000,000 ‚ÇΩ (20%)

–ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –ø—Ä–æ—Ü–µ–Ω—Ç—ã:
‚îú‚îÄ‚îÄ –°–±–µ—Ä–±–∞–Ω–∫: 73,973 ‚ÇΩ (18% –≥–æ–¥–æ–≤—ã—Ö, 50 –¥–Ω–µ–π)
‚îú‚îÄ‚îÄ –ß–∞—Å—Ç–Ω—ã–π: 32,877 ‚ÇΩ (24% –≥–æ–¥–æ–≤—ã—Ö, 50 –¥–Ω–µ–π)
‚îî‚îÄ‚îÄ –ò—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ–Ω—Ç—ã: 106,850 ‚ÇΩ

–≠—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –∑–∞—Ç—Ä–∞—Ç—ã —Ç–µ–Ω–¥–µ—Ä–∞!

### 4.5 –ì—Ä–∞—Ñ–∏–∫ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
- –í–∞—Ä–∏–∞–Ω—Ç—ã:
  - –ï–¥–∏–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –≤ –∫–æ–Ω—Ü–µ —Å—Ä–æ–∫–∞
  - –ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
  - –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ä–æ—á–µ–∫
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –ø–ª–∞—Ç–µ–∂–∞—Ö

### 4.6 –§–∏–∫—Å–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–æ–≤

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–ª–≥ –∏ –ø—Ä–æ—Ü–µ–Ω—Ç—ã
- –°–≤—è–∑—å —Å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤

### 4.7 –ü–æ—Ä—Ç–∞–ª –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞

**–ß—Ç–æ –≤–∏–¥–∏—Ç –∏–Ω–≤–µ—Å—Ç–æ—Ä:**

- –°–ø–∏—Å–æ–∫ —Å–≤–æ–∏—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
- –î–µ—Ç–∞–ª–∏ –∫–∞–∂–¥–æ–π –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏:
  - –°—É–º–º–∞, —Å—Ç–∞–≤–∫–∞, —Å—Ä–æ–∫
  - –ì—Ä–∞—Ñ–∏–∫ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
  - –°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–µ–π
- –ü—Ä–æ–≥—Ä–µ—Å—Å —Ç–µ–Ω–¥–µ—Ä–∞:
  - –¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø
  - –ö–ª—é—á–µ–≤—ã–µ –¥–∞—Ç—ã
  - –î–æ–∫—É–º–µ–Ω—Ç—ã (–µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ)
- –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å–≤–æ–¥–∫–∞:
  - –ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
  - –í–æ–∑–≤—Ä–∞—â–µ–Ω–æ
  - –û–∂–∏–¥–∞–µ—Ç—Å—è

**–ß—Ç–æ –ù–ï –º–æ–∂–µ—Ç –∏–Ω–≤–µ—Å—Ç–æ—Ä:**

- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
- –í–∏–¥–µ—Ç—å –¥—Ä—É–≥–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
- –í–∏–¥–µ—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–µ—Å–ª–∏ –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ)

---

## 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 5.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¢–µ–Ω–¥–µ—Ä–∞–º–∏

- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤—ã–±–æ—Ä —Ç–µ–Ω–¥–µ—Ä–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä–∞:
  - `has_investment = true`
  - `investment_amount = —Å—É–º–º–∞`
  - `investment_interest_cost = –ø—Ä–æ—Ü–µ–Ω—Ç—ã`
- –ü—Ä–æ—Ü–µ–Ω—Ç—ã –≤—Ö–æ–¥—è—Ç –≤ –∑–∞—Ç—Ä–∞—Ç—ã —Ç–µ–Ω–¥–µ—Ä–∞
- –†–∞—Å—á—ë—Ç –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Å —É—á—ë—Ç–æ–º –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤

### 5.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–µ–π

- –°–æ–∑–¥–∞–Ω–∏–µ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–π–º–∞
  - –í–æ–∑–≤—Ä–∞—Ç –∑–∞–π–º–∞
  - –í—ã–ø–ª–∞—Ç–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
- –°–≤—è–∑—å —Å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- –û—Ç—Ä–∞–∂–µ–Ω–∏–µ –≤ –æ—Ç—á—ë—Ç–∞—Ö:
  - –î–î–° (–¥–≤–∏–∂–µ–Ω–∏–µ –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤)
  - P&L (–ø—Ä–æ—Ü–µ–Ω—Ç—ã –∫–∞–∫ —Ä–∞—Å—Ö–æ–¥)
  - –ö—Ä–µ–¥–∏—Ç–æ—Ä—Å–∫–∞—è –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å

### 5.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –≤–æ–∑–≤—Ä–∞—Ç–µ –∑–∞ N –¥–Ω–µ–π
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–æ—Å—Ä–æ—á–∫–µ
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–æ—Ä—É –æ –ø–ª–∞—Ç–µ–∂–µ

---

## 6. –ú–µ–Ω—é –º–æ–¥—É–ª—è

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üí∞ –ò–ù–í–ï–°–¢–û–†–´                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üìä –î–∞—à–±–æ—Ä–¥                             ‚îÇ
‚îÇ  üè¶ –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è            ‚îÇ
‚îÇ  üìã –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏                          ‚îÇ
‚îÇ  üìÖ –ì—Ä–∞—Ñ–∏–∫ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤                    ‚îÇ
‚îÇ  üìà –û—Ç—á—ë—Ç—ã                              ‚îÇ
‚îÇ  üë• –î–æ—Å—Ç—É–ø –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤                   ‚îÇ
‚îÇ  ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

---

## 7. –í–∏–¥–∂–µ—Ç—ã –¥–∞—à–±–æ—Ä–¥–∞

1. **–í—Å–µ–≥–æ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–æ** ‚Äî —Å—É–º–º–∞ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
2. **–ö –≤–æ–∑–≤—Ä–∞—Ç—É** ‚Äî —Å—É–º–º–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
3. **–í–æ–∑–≤—Ä–∞—â–µ–Ω–æ** ‚Äî —Å—É–º–º–∞ —É–∂–µ –≤–æ–∑–≤—Ä–∞—â—ë–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤
4. **–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ** ‚Äî —Å—É–º–º–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
5. **–ì—Ä–∞—Ñ–∏–∫ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤** ‚Äî –∫–∞–ª–µ–Ω–¥–∞—Ä—å –ø–ª–∞—Ç–µ–∂–µ–π
6. **–¢–æ–ø –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤** ‚Äî –ø–æ –æ–±—ä—ë–º—É –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
7. **–ê–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏** ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö

---

## 8. –û—Ç—á—ë—Ç—ã

1. **–û—Ç—á—ë—Ç –ø–æ –∏–Ω–≤–µ—Å—Ç–æ—Ä—É** ‚Äî –≤—Å–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
2. **–û—Ç—á—ë—Ç –ø–æ —Ç–µ–Ω–¥–µ—Ä—É** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–Ω–¥–µ—Ä–∞
3. **–°–≤–æ–¥–Ω—ã–π –æ—Ç—á—ë—Ç** ‚Äî –≤—Å–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
4. **–û—Ç—á—ë—Ç –ø–æ –≤–æ–∑–≤—Ä–∞—Ç–∞–º** ‚Äî –ø–ª–∞–Ω-—Ñ–∞–∫—Ç –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
5. **–û—Ç—á—ë—Ç –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞** (PDF) ‚Äî –≤—ã–ø–∏—Å–∫–∞ –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞

---

## 9. –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- [x] –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- [x] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã

### –≠—Ç–∞–ø 2: –ë—ç–∫–µ–Ω–¥ (lib/investors/)

- [x] types.ts ‚Äî —Ç–∏–ø—ã TypeScript
- [x] service.ts ‚Äî CRUD –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
- [x] calculations.ts ‚Äî —Ä–∞—Å—á—ë—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤
- [x] returns.ts ‚Äî –ª–æ–≥–∏–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
- [x] reports.ts ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤
- [x] portal.ts ‚Äî –ª–æ–≥–∏–∫–∞ –¥–ª—è –ø–æ—Ä—Ç–∞–ª–∞ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞

### –≠—Ç–∞–ø 3: Layout –∏ –º–µ–Ω—é

- [x] InvestorsLayout.tsx ‚Äî –æ–±—â–∏–π layout
- [x] InvestorsSidebar.tsx ‚Äî –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é
- [x] –ö–Ω–æ–ø–∫–∞ –≤ –≥–ª–∞–≤–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### –≠—Ç–∞–ø 4: –°—Ç—Ä–∞–Ω–∏—Ü—ã –∞–¥–º–∏–Ω–∞

- [x] /investors ‚Äî –¥–∞—à–±–æ—Ä–¥ —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏
- [x] /investors/sources ‚Äî CRUD –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- [x] /investors/investments ‚Äî —Å–ø–∏—Å–æ–∫ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
- [x] /investors/investments/new ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
- [x] /investors/investments/[id] ‚Äî –¥–µ—Ç–∞–ª–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
- [x] /investors/returns ‚Äî –≥—Ä–∞—Ñ–∏–∫ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
- [x] /investors/access ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤

### –≠—Ç–∞–ø 5: –ü–æ—Ä—Ç–∞–ª –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞

- [x] /investor-portal ‚Äî layout –∏ login page
- [x] /investor-portal/dashboard ‚Äî –¥–∞—à–±–æ—Ä–¥ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞
- [x] /investor-portal/investment/[id] ‚Äî –¥–µ—Ç–∞–ª–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
- [x] Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞

### –≠—Ç–∞–ø 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- [x] –°–≤—è–∑—å —Å —Ç–µ–Ω–¥–µ—Ä–∞–º–∏ (–ø–æ–ª—è –≤ tenders –¥–æ–±–∞–≤–ª–µ–Ω—ã)
- [x] –°–≤—è–∑—å —Å –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–µ–π (—Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
- [x] –£—á—ë—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –≤ –∑–∞—Ç—Ä–∞—Ç–∞—Ö —Ç–µ–Ω–¥–µ—Ä–∞

### –≠—Ç–∞–ø 7: –û—Ç—á—ë—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

- [x] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç—á—ë—Ç–æ–≤ (–±–∞–∑–æ–≤–∞—è)
- [x] PDF –æ—Ç—á—ë—Ç—ã
- [x] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [x] –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –≤–æ–∑–≤—Ä–∞—Ç–∞—Ö

---

## 10. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –Ω–∞ —Ç–µ–Ω–¥–µ—Ä

1. –ê–¥–º–∏–Ω —Å–æ–∑–¥–∞—ë—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ "–°–±–µ—Ä–±–∞–Ω–∫ –ë–∏–∑–Ω–µ—Å"
2. –í—ã–∏–≥—Ä–∞–Ω —Ç–µ–Ω–¥–µ—Ä –Ω–∞ 5 –º–ª–Ω ‚ÇΩ
3. –ù—É–∂–Ω–æ 3 –º–ª–Ω ‚ÇΩ –∑–∞—ë–º–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤
4. –°–æ–∑–¥–∞—ë—Ç—Å—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è:
   - –ò—Å—Ç–æ—á–Ω–∏–∫: –°–±–µ—Ä–±–∞–Ω–∫
   - –¢–µ–Ω–¥–µ—Ä: "–ü–æ—Å—Ç–∞–≤–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è"
   - –°—É–º–º–∞: 3,000,000 ‚ÇΩ
   - –°—Ç–∞–≤–∫–∞: 18% –≥–æ–¥–æ–≤—ã—Ö
   - –°—Ä–æ–∫: 60 –¥–Ω–µ–π
5. –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç:
   - –ü—Ä–æ—Ü–µ–Ω—Ç—ã: 88,767 ‚ÇΩ
   - –í—Å–µ–≥–æ –∫ –≤–æ–∑–≤—Ä–∞—Ç—É: 3,088,767 ‚ÇΩ
6. –ü—Ä–æ—Ü–µ–Ω—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∑–∞—Ç—Ä–∞—Ç—ã —Ç–µ–Ω–¥–µ—Ä–∞
7. –ò–Ω–≤–µ—Å—Ç–æ—Ä –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç–∞–ª—É
8. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø–æ —Ç–µ–Ω–¥–µ—Ä—É ‚Äî –≤–æ–∑–≤—Ä–∞—Ç –∏–Ω–≤–µ—Å—Ç–æ—Ä—É

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –¢–µ–Ω–¥–µ—Ä: 10 –º–ª–Ω ‚ÇΩ
2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
   - –ë–∞–Ω–∫: 5 –º–ª–Ω ‚ÇΩ (50%) –ø–æ–¥ 16%
   - –ß–∞—Å—Ç–Ω—ã–π –∏–Ω–≤–µ—Å—Ç–æ—Ä: 3 –º–ª–Ω ‚ÇΩ (30%) –ø–æ–¥ 24%
   - –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ: 2 –º–ª–Ω ‚ÇΩ (20%)
3. –ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –ø—Ä–æ—Ü–µ–Ω—Ç—ã –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ P&L —Ç–µ–Ω–¥–µ—Ä–∞
4. –ö–∞–∂–¥—ã–π –∏–Ω–≤–µ—Å—Ç–æ—Ä –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ—é —á–∞—Å—Ç—å

---

## –°—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–∞

- [x] –ü–ª–∞–Ω —Å–æ—Å—Ç–∞–≤–ª–µ–Ω
- [x] –≠—Ç–∞–ø 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚úÖ (020_investors_module.sql)
- [x] –≠—Ç–∞–ø 2: –ë—ç–∫–µ–Ω–¥ ‚úÖ (lib/investors/types.ts, service.ts, calculations.ts)
- [x] –≠—Ç–∞–ø 3: Layout –∏ –º–µ–Ω—é ‚úÖ (InvestorsLayout, InvestorsSidebar)
- [x] –≠—Ç–∞–ø 4: –°—Ç—Ä–∞–Ω–∏—Ü—ã –∞–¥–º–∏–Ω–∞ ‚úÖ (Dashboard, Sources, Investments, Returns, Access)
- [x] –≠—Ç–∞–ø 5: –ü–æ—Ä—Ç–∞–ª –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ ‚úÖ (–±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, login page)
- [x] –≠—Ç–∞–ø 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ‚úÖ (–±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- [x] –≠—Ç–∞–ø 7: –û—Ç—á—ë—Ç—ã ‚úÖ (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ reports, settings)
