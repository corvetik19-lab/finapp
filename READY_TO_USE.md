# ‚úÖ –í–°–Å –ì–û–¢–û–í–û! –§–∏–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ n8n

## üéâ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

1. ‚úÖ **Telegram Bot Credential —Å–æ–∑–¥–∞–Ω** - "FNS Bot"
2. ‚úÖ **OpenAI Credential –µ—Å—Ç—å** - "n8n free OpenAI API credits"
3. ‚úÖ **API endpoint –≥–æ—Ç–æ–≤** - `/api/receipts/import`
4. ‚úÖ **Webhook URL –≥–æ—Ç–æ–≤** - `https://domik1.app.n8n.cloud/webhook/cf135bc5-aedb-4d05-8743-67db3a0f3304`

## üìù –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ

```
Telegram Bot Token: 8090380353:AAGeiIH0tA_kXoJ8HeMN3RTmR8O4hgXojzE
Telegram Bot Name: Finappka_FNS_Bot
OpenRouter API Key: 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
n8n Workspace: https://domik1.app.n8n.cloud
```

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π –≥–æ—Ç–æ–≤—ã–π workflow

1. **–°–∫–∞—á–∞–π —Ñ–∞–π–ª:**
   ```
   c:\fin3\finapp\integrations\n8n-cloud\workflows\telegram-fns-to-finappka.json
   ```

2. **–û—Ç–∫—Ä–æ–π n8n:**
   ```
   https://domik1.app.n8n.cloud/home/workflows
   ```

3. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π:**
   - –ö–Ω–æ–ø–∫–∞ —Å 3 —Ç–æ—á–∫–∞–º–∏ (‚ãÆ) ‚Üí **Import from File**
   - –í—ã–±–µ—Ä–∏ `telegram-fns-to-finappka.json`

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π credentials –≤ workflow

–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è workflow. –ù—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å credentials –∫ –∫–∞–∂–¥–æ–º—É node:

#### A. Telegram Bot Trigger
1. –ö–ª–∏–∫–Ω–∏ –Ω–∞ node "Telegram Bot"
2. **Credential** ‚Üí –í—ã–±–µ—Ä–∏ **"FNS Bot"**
3. –ì–æ—Ç–æ–≤–æ!

#### B. AI Categorize (OpenAI)
1. –ö–ª–∏–∫–Ω–∏ –Ω–∞ node "AI Categorize"
2. **Credential** ‚Üí –í—ã–±–µ—Ä–∏ **"n8n free OpenAI API credits"**
3. –ì–æ—Ç–æ–≤–æ!

**–ò–õ–ò –∏—Å–ø–æ–ª—å–∑—É–π OpenRouter:**

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OpenRouter –≤–º–µ—Å—Ç–æ OpenAI:
1. –£–¥–∞–ª–∏ node "AI Categorize" (OpenAI)
2. –î–æ–±–∞–≤—å node **"HTTP Request"**
3. –ù–∞—Å—Ç—Ä–æ–π:
   ```
   Method: POST
   URL: https://openrouter.ai/api/v1/chat/completions
   
   Headers:
   Authorization: Bearer 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
   Content-Type: application/json
   
   Body (JSON):
   {
     "model": "openai/gpt-4o-mini",
     "messages": [
       {
         "role": "system",
         "content": "–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–∫—É–ø–æ–∫..."
       },
       {
         "role": "user",
         "content": "{{ $json.raw_text }}"
       }
     ]
   }
   ```

#### C. Send Success & Send Error (Telegram)
1. –ö–ª–∏–∫–Ω–∏ –Ω–∞ node "Send Success"
2. **Credential** ‚Üí –í—ã–±–µ—Ä–∏ **"FNS Bot"**
3. –ü–æ–≤—Ç–æ—Ä–∏ –¥–ª—è node "Send Error"

#### D. Import to Finappka (HTTP Request)
1. –ö–ª–∏–∫–Ω–∏ –Ω–∞ node "Import to Finappka"
2. –ò–∑–º–µ–Ω–∏ **URL**:
   
   **–ï—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ (—Å ngrok):**
   ```bash
   # –ó–∞–ø—É—Å—Ç–∏ ngrok
   ngrok http 3000
   
   # –°–∫–æ–ø–∏—Ä—É–π URL: https://abc123.ngrok.io
   ```
   
   –í—Å—Ç–∞–≤—å: `https://abc123.ngrok.io/api/receipts/import`
   
   **–ï—Å–ª–∏ –∑–∞–¥–µ–ø–ª–æ–∏–ª:**
   ```
   https://—Ç–≤–æ–π-–¥–æ–º–µ–Ω.vercel.app/api/receipts/import
   ```

3. **Authentication** ‚Üí None (–ø–æ–∫–∞)
   
   *–ü–æ–∑–∂–µ –¥–æ–±–∞–≤–∏–º Supabase auth header*

### –®–∞–≥ 3: –°–æ—Ö—Ä–∞–Ω–∏ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π

1. –ù–∞–∂–º–∏ **"Save"** (Ctrl+S)
2. –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å **"Active"** ‚Üí ON
3. –ì–æ—Ç–æ–≤–æ! üéâ

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü–æ–ª—É—á–∏ —á–µ–∫ –æ—Ç –§–ù–° –±–æ—Ç–∞

–°–¥–µ–ª–∞–π –ø–æ–∫—É–ø–∫—É –∏ –ø–æ–ª—É—á–∏ —á–µ–∫ –æ—Ç @ofd_receipt_bot

### 2. –ü–µ—Ä–µ—à–ª–∏ —á–µ–∫ —Å–≤–æ–µ–º—É –±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π Telegram
2. –ù–∞–π–¥–∏ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞: **@Finappka_FNS_Bot**
3. –ü–µ—Ä–µ—à–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –§–ù–° –±–æ—Ç–∞
4. –ñ–¥–∏ 3-5 —Å–µ–∫—É–Ω–¥

### 3. –ü–æ–ª—É—á–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

–ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç:
```
‚úÖ –ß–µ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω!

üè™ –ú–∞–≥–∞–∑–∏–Ω: –ü—è—Ç—ë—Ä–æ—á–∫–∞
üí∞ –°—É–º–º–∞: 337.96‚ÇΩ
üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ü—Ä–æ–¥—É–∫—Ç—ã

üì¶ –¢–æ–≤–∞—Ä—ã:
‚Ä¢ –ú–æ–ª–æ–∫–æ - 47.99‚ÇΩ (–ü—Ä–æ–¥—É–∫—Ç—ã)
‚Ä¢ –•–ª–µ–± - 89.99‚ÇΩ (–ü—Ä–æ–¥—É–∫—Ç—ã)

‚ú® –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã –≤ Finappka!
```

### 4. –ü—Ä–æ–≤–µ—Ä—å Finappka

–û—Ç–∫—Ä–æ–π **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** ‚Äî –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏!

---

## üîß –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ workflow **Active** (–∑–µ–ª—ë–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å)
2. –ü—Ä–æ–≤–µ—Ä—å Executions –≤ n8n:
   ```
   https://domik1.app.n8n.cloud/home/executions
   ```
3. –ü–æ—Å–º–æ—Ç—Ä–∏ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ Finappka –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (ngrok –∏–ª–∏ –¥–µ–ø–ª–æ–π)
2. –ü—Ä–æ–≤–µ—Ä—å URL –≤ node "Import to Finappka"
3. –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –≤ n8n Executions

### –ü—Ä–æ–±–ª–µ–º–∞: AI –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π OpenRouter –≤–º–µ—Å—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ OpenAI
2. –£–ª—É—á—à–∏ –ø—Ä–æ–º–ø—Ç –≤ node "AI Categorize"
3. –î–æ–±–∞–≤—å –ø—Ä–∏–º–µ—Ä—ã –≤ –ø—Ä–æ–º–ø—Ç

---

## üìä –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π workflow (–±–µ–∑ AI)

–ï—Å–ª–∏ –Ω–µ —Ö–æ—á–µ—à—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å AI, –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—É—é –≤–µ—Ä—Å–∏—é:

### –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π workflow –≤—Ä—É—á–Ω—É—é:

1. **Telegram Trigger**
   - Credential: FNS Bot
   - Updates: Message

2. **Code** (Parse Receipt)
   - –ü–∞—Ä—Å–∏—Ç —á–µ–∫ (–∫–æ–¥ –≤ `FNS_TELEGRAM_AUTOMATION.md`)

3. **HTTP Request** (Create Transaction)
   - URL: `https://—Ç–≤–æ–π-url/api/receipts/import`
   - Method: POST
   - Body: –¥–∞–Ω–Ω—ã–µ —á–µ–∫–∞

4. **Telegram** (Send Success)
   - Credential: FNS Bot
   - Text: "‚úÖ –ß–µ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω!"

**–ê–∫—Ç–∏–≤–∏—Ä—É–π** ‚Üí –ì–æ—Ç–æ–≤–æ!

---

## üí° –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –±–∞–∑–æ–≤–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–î–æ–±–∞–≤—å AI –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—é** (OpenRouter)
2. **–ù–∞—Å—Ç—Ä–æ–π –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π**
3. **–î–æ–±–∞–≤—å —Ñ–∏–ª—å—Ç—Ä—ã** (–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω—ã)
4. **–ù–∞—Å—Ç—Ä–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –±—é–¥–∂–µ—Ç–∞
5. **–°–æ–∑–¥–∞–π –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã**

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** `FNS_TELEGRAM_AUTOMATION.md`
- **API endpoint:** `app/api/receipts/import/route.ts`
- **–ì–æ—Ç–æ–≤—ã–π workflow:** `integrations/n8n-cloud/workflows/telegram-fns-to-finappka.json`

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç

- [ ] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª workflow –≤ n8n
- [ ] –ü—Ä–∏–º–µ–Ω–∏–ª credential "FNS Bot" –∫ Telegram nodes
- [ ] –ü—Ä–∏–º–µ–Ω–∏–ª credential –∫ AI node (–∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏–ª OpenRouter)
- [ ] –ò–∑–º–µ–Ω–∏–ª URL –≤ "Import to Finappka" node
- [ ] –°–æ—Ö—Ä–∞–Ω–∏–ª workflow
- [ ] –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª workflow
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª —Å —Ä–µ–∞–ª—å–Ω—ã–º —á–µ–∫–æ–º
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ Finappka

---

**üéâ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —á–µ–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! ü§ñ**

**–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?** –ü–∏—à–∏, –ø–æ–º–æ–≥—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è!
